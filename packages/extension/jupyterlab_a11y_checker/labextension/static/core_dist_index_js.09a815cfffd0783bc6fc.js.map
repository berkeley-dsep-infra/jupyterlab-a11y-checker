{"version":3,"file":"core_dist_index_js.09a815cfffd0783bc6fc.js","mappings":";;;;;;;;;;;;;;;;;;;;AAA2B;AACK;AAKD;AAC+B;AACA;AACA;AACD;AAEtD,KAAK,UAAU,yBAAyB,CAC7C,KAAqB,EACrB,eAAyB,EACzB,OAAe,EACf,cAA+B,EAC/B,eAAuB,EAAE;IAEzB,MAAM,cAAc,GAAiB,EAAE,CAAC;IAExC,wBAAwB;IACxB,cAAc,CAAC,IAAI,CACjB,GAAG,CAAC,MAAM,2EAAqB,CAAC,EAAE,EAAE,CAAC,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC,CAC3D,CAAC;IAEF,MAAM,OAAO,GAAG,eAAe,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACrD,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IAE1C,MAAM,SAAS,GAAmB;QAChC,OAAO,EAAE,CAAC,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,CAAC;QACrD,KAAK,EAAE;YACL,WAAW,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE;YAC/B,eAAe,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE;YACnC,eAAe,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE;YACnC,sBAAsB,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE;YAC1C,WAAW,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE;SAChC;KACF,CAAC;IAEF,IAAI;QACF,uDAAuD;QACvD,MAAM,aAAa,GAAG,MAAM,6EAAuB,CAAC,KAAK,CAAC,CAAC;QAC3D,cAAc,CAAC,IAAI,CAAC,GAAG,aAAa,CAAC,CAAC;QAEtC,iDAAiD;QACjD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,CAAC,IAAI,EAAE;gBACT,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,CAAC;gBAC1D,SAAS;aACV;YAED,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;YAC3B,IAAI,QAAQ,KAAK,UAAU,EAAE;gBAC3B,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC;gBAChC,IAAI,WAAW,CAAC,IAAI,EAAE,EAAE;oBACtB,OAAO,CAAC,SAAS,GAAG,MAAM,0CAAM,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;oBAEpD,MAAM,OAAO,GAAG,MAAM,mDAAO,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;oBAClD,MAAM,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC;oBAEtC,gDAAgD;oBAChD,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;wBACzB,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;4BAC7B,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gCAC7B,cAAc,CAAC,IAAI,CAAC;oCAClB,SAAS,EAAE,CAAC;oCACZ,QAAQ,EAAE,QAAQ;oCAClB,WAAW,EAAE,SAAS,CAAC,EAAE;oCACzB,eAAe,EAAE,IAAI,CAAC,IAAI;iCAC3B,CAAC,CAAC;4BACL,CAAC,CAAC,CAAC;wBACL,CAAC,CAAC,CAAC;qBACJ;oBAED,eAAe;oBACf,cAAc,CAAC,IAAI,CACjB,GAAG,CAAC,MAAM,2EAAuB,CAC/B,WAAW,EACX,CAAC,EACD,QAAQ,EACR,YAAY,EACZ,OAAO,EACP,cAAc,EACd,IAAI,CAAC,WAAW,CACjB,CAAC,CACH,CAAC;oBAEF,eAAe;oBACf,cAAc,CAAC,IAAI,CACjB,GAAG,2EAAuB,CAAC,WAAW,EAAE,CAAC,EAAE,QAAQ,CAAC,CACrD,CAAC;oBAEF,eAAe;oBACf,cAAc,CAAC,IAAI,CACjB,GAAG,CAAC,MAAM,2EAAuB,CAC/B,WAAW,EACX,CAAC,EACD,QAAQ,EACR,YAAY,EACZ,OAAO,EACP,cAAc,EACd,IAAI,CAAC,WAAW,CACjB,CAAC,CACH,CAAC;oBAEF,cAAc;oBACd,cAAc,CAAC,IAAI,CACjB,GAAG,0EAAsB,CAAC,WAAW,EAAE,CAAC,EAAE,QAAQ,CAAC,CACpD,CAAC;iBACH;aACF;iBAAM,IAAI,QAAQ,KAAK,MAAM,EAAE;gBAC9B,yCAAyC;aAC1C;SACF;KACF;YAAS;QACR,OAAO,CAAC,MAAM,EAAE,CAAC;KAClB;IAED,OAAO,cAAc,CAAC;AACxB,CAAC;AAED,+EAA+E;AAC/E,4DAA4D;AACrD,KAAK,UAAU,iBAAiB,CACrC,IAAkB,EAClB,eAAyB,EACzB,OAAe,EACf,cAA+B,EAC/B,eAAuB,EAAE;IAEzB,MAAM,MAAM,GAAiB,EAAE,CAAC;IAEhC,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC;IAC3B,IAAI,QAAQ,KAAK,UAAU,EAAE;QAC3B,OAAO,MAAM,CAAC;KACf;IAED,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC;IAChC,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,EAAE;QACvB,OAAO,MAAM,CAAC;KACf;IAED,SAAS;IACT,MAAM,CAAC,IAAI,CACT,GAAG,CAAC,MAAM,2EAAuB,CAC/B,WAAW,EACX,IAAI,CAAC,SAAS,EACd,QAAQ,EACR,YAAY,EACZ,OAAO,EACP,cAAc,EACd,IAAI,CAAC,WAAW,CACjB,CAAC,CACH,CAAC;IAEF,SAAS;IACT,MAAM,CAAC,IAAI,CACT,GAAG,2EAAuB,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAClE,CAAC;IAEF,QAAQ;IACR,MAAM,CAAC,IAAI,CACT,GAAG,CAAC,MAAM,2EAAuB,CAC/B,WAAW,EACX,IAAI,CAAC,SAAS,EACd,QAAQ,EACR,YAAY,EACZ,OAAO,EACP,cAAc,EACd,IAAI,CAAC,WAAW,CACjB,CAAC,CACH,CAAC;IAEF,QAAQ;IACR,MAAM,CAAC,IAAI,CAAC,GAAG,0EAAsB,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC;IAE9E,OAAO,MAAM,CAAC;AAChB,CAAC;AAED;;;GAGG;AACI,KAAK,UAAU,4BAA4B,CAChD,KAAqB,EACrB,cAA+B;IAE/B,MAAM,cAAc,GAAiB,EAAE,CAAC;IAExC,uBAAuB;IACvB,cAAc,CAAC,IAAI,CACjB,GAAG,CAAC,MAAM,2EAAqB,CAAC,EAAE,EAAE,CAAC,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC,CAC3D,CAAC;IAEF,uBAAuB;IACvB,MAAM,aAAa,GAAG,MAAM,6EAAuB,CAAC,KAAK,CAAC,CAAC;IAC3D,cAAc,CAAC,IAAI,CAAC,GAAG,aAAa,CAAC,CAAC;IAEtC,qBAAqB;IACrB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACrC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACtB,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE;YAClD,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC;YAEhC,eAAe;YACf,cAAc,CAAC,IAAI,CACjB,GAAG,CAAC,MAAM,2EAAuB,CAC/B,WAAW,EACX,CAAC,EACD,IAAI,CAAC,IAAI,EACT,EAAE,EAAE,eAAe;YACnB,EAAE,EAAE,UAAU;YACd,cAAc,EACd,IAAI,CAAC,WAAW,CACjB,CAAC,CACH,CAAC;YAEF,eAAe;YACf,cAAc,CAAC,IAAI,CACjB,GAAG,2EAAuB,CAAC,WAAW,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CACtD,CAAC;YAEF,eAAe;YACf;;;;;;;;;;;;cAYE;YAEF,cAAc;YACd,cAAc,CAAC,IAAI,CAAC,GAAG,0EAAsB,CAAC,WAAW,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC3E;KACF;IAED,OAAO,cAAc,CAAC;AACxB,CAAC;;;;;;;;;;;;;;;;;ACrP6C;AAG9C,SAAS,QAAQ,CAAC,GAAW;IAC3B,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACxC,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACxC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AACrB,CAAC;AAED,SAAS,kBAAkB,CAAC,GAAwC;IAClE,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;QACtC,CAAC,IAAI,GAAG,CAAC;QACT,OAAO,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,EAAE,GAAG,CAAC,CAAC;IACvE,CAAC,CAAC,CAAC;IACH,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC;AACvD,CAAC;AAED,SAAS,iBAAiB,CACxB,aAAqB,EACrB,aAAqB;IAErB,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC;IACrC,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,CAAC;IACrC,MAAM,EAAE,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC;IACpC,MAAM,EAAE,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC;IACpC,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACjC,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IAChC,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC;AAC5C,CAAC;AAED,KAAK,UAAU,uBAAuB,CACpC,SAAiB,EACjB,oBAA4B,EAC5B,OAAe,EACf,cAA+B,EAC/B,WAAyC;IAEzC,qCAAqC;IACrC,IAAI,WAAmB,CAAC;IAExB,2CAA2C;IAC3C,IAAI,SAAS,CAAC,UAAU,CAAC,aAAa,CAAC,EAAE;QACvC,IAAI,CAAC,WAAW,EAAE;YAChB,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;SAC/D;QACD,MAAM,YAAY,GAAG,SAAS,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAC/D,MAAM,IAAI,GAAG,WAAW,CAAC,YAAY,CAAC,CAAC;QACvC,IAAI,OAAO,GAAkB,IAAI,CAAC;QAElC,IAAI,IAAI,EAAE;YACR,KAAK,MAAM,QAAQ,IAAI,IAAI,EAAE;gBAC3B,IAAI,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;oBACjC,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;oBAC9B,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;wBAC9B,OAAO,GAAG,QAAQ,QAAQ,WAAW,MAAM,EAAE,CAAC;wBAC9C,MAAM;qBACP;iBACF;aACF;SACF;QAED,IAAI,CAAC,OAAO,EAAE;YACZ,MAAM,IAAI,KAAK,CAAC,8BAA8B,YAAY,EAAE,CAAC,CAAC;SAC/D;QACD,WAAW,GAAG,OAAO,CAAC;KACvB;SAAM;QACL,uCAAuC;QACvC,WAAW,GAAG,SAAS,CAAC,UAAU,CAAC,MAAM,CAAC;YACxC,CAAC,CAAC,SAAS;YACX,CAAC,CAAC,GAAG,OAAO,SAAS,oBAAoB,IAAI,SAAS,EAAE,CAAC;KAC5D;IAED,+BAA+B;IAC/B,MAAM,GAAG,GAAG,MAAM,cAAc,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;IAExD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QACrC,CAAC,KAAK,IAAI,EAAE;YACV,IAAI;gBACF,MAAM,MAAM,GAAG,cAAc,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;gBAClE,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBACpC,IAAI,CAAC,GAAG,EAAE;oBACR,MAAM,CAAC,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC,CAAC;oBAClD,OAAO;iBACR;gBAED,aAAa;gBACb,GAAG,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBACzB,MAAM,SAAS,GAAG,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;gBAEtE,IAAI;oBACF,0BAA0B;oBAC1B,MAAM,MAAM,GAAG,MAAM,gEAAsB,EAAE,CAAC;oBAE9C,mCAAmC;oBACnC,MAAM,MAAM,CAAC,aAAa,CAAC;wBACzB,qBAAqB,EAAE,6CAAG,CAAC,WAAW;qBACvC,CAAC,CAAC;oBAEH,oCAAoC;oBACpC,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;oBACpE,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,GAAG,EAAE,EAAE;wBAC/B,8DAA8D;wBAC9D,OAAO,CAAC;4BACN,QAAQ,EAAE,EAAE;4BACZ,YAAY,EAAE,IAAI;4BAClB,YAAY,EAAE,KAAK;yBACpB,CAAC,CAAC;wBACH,OAAO;qBACR;oBAED,IAAI,WAAW,GAAG,EAAE,CAAC,CAAC,8BAA8B;oBACpD,IAAI,YAAY,GAAG,KAAK,CAAC;oBAEzB,0BAA0B;oBAC1B,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;wBACvD,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;4BACjC,MAAM,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC;4BACtC,MAAM,UAAU,GAAG,EAAE,GAAG,EAAE,CAAC;4BAE3B,0CAA0C;4BAC1C,IAAI,UAAU,IAAI,EAAE,EAAE;gCACpB,YAAY,GAAG,IAAI,CAAC;6BACrB;4BAED,iCAAiC;4BACjC,MAAM,UAAU,GAA8B,EAAE,CAAC;4BACjD,MAAM,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC;4BAC5B,MAAM,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC;4BAE9B,oCAAoC;4BACpC,KAAK,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;gCAC7B,KAAK,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;oCAC7B,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;oCAClC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;oCACtB,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;oCAC1B,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;oCAE1B,0BAA0B;oCAC1B,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG,EAAE;wCACzB,SAAS;qCACV;oCAED,0CAA0C;oCAC1C,MAAM,KAAK,GAAG,EAAE,CAAC;oCACjB,MAAM,QAAQ,GACZ,GAAG;wCACH,CACE,CAAC,CAAC,IAAI,EAAE,CAAC;4CACT,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;4CACvC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;4CACtC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAC9B;6CACE,QAAQ,CAAC,EAAE,CAAC;6CACZ,KAAK,CAAC,CAAC,CAAC;6CACR,WAAW,EAAE,CAAC;oCAEnB,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;iCACxD;6BACF;4BAED,iCAAiC;4BACjC,MAAM,YAAY,GAAG,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,IAAI,CAClD,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACtB,CAAC;4BACF,IAAI,YAAY,CAAC,MAAM,IAAI,CAAC,EAAE;gCAC5B,MAAM,OAAO,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gCACnC,MAAM,OAAO,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gCAEnC,2BAA2B;gCAC3B,MAAM,QAAQ,GAAG,iBAAiB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gCAErD,0BAA0B;gCAC1B,IAAI,QAAQ,GAAG,WAAW,EAAE;oCAC1B,WAAW,GAAG,QAAQ,CAAC;iCACxB;6BACF;wBACH,CAAC,CAAC,CAAC;qBACJ;oBAED,yEAAyE;oBACzE,MAAM,YAAY,GAAG,YAAY;wBAC/B,CAAC,CAAC,WAAW,IAAI,CAAC;wBAClB,CAAC,CAAC,WAAW,IAAI,GAAG,CAAC;oBAEvB,uBAAuB;oBACvB,MAAM,MAAM,CAAC,SAAS,EAAE,CAAC;oBAEzB,OAAO,CAAC;wBACN,QAAQ,EAAE,WAAW;wBACrB,YAAY;wBACZ,YAAY;qBACb,CAAC,CAAC;iBACJ;gBAAC,OAAO,KAAK,EAAE;oBACd,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC,CAAC;oBAC9D,yCAAyC;oBACzC,MAAM,UAAU,GAA8B,EAAE,CAAC;oBACjD,MAAM,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC;oBAC5B,MAAM,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC;oBAC9B,MAAM,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;oBAEhC,yEAAyE;oBACzE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,IAAI,EAAE,EAAE;wBACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,EAAE,EAAE;4BAClC,MAAM,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;4BAClC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC;4BACtB,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;4BAC1B,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;4BAE1B,0BAA0B;4BAC1B,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG,EAAE;gCACzB,SAAS;6BACV;4BAED,0CAA0C;4BAC1C,MAAM,KAAK,GAAG,EAAE,CAAC;4BACjB,MAAM,QAAQ,GACZ,GAAG;gCACH,CACE,CAAC,CAAC,IAAI,EAAE,CAAC;oCACT,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,EAAE,CAAC;oCACvC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;oCACtC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC,GAAG,KAAK,CAC9B;qCACE,QAAQ,CAAC,EAAE,CAAC;qCACZ,KAAK,CAAC,CAAC,CAAC;qCACR,WAAW,EAAE,CAAC;4BAEnB,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;yBACxD;qBACF;oBAED,iCAAiC;oBACjC,MAAM,YAAY,GAAG,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,IAAI,CAClD,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACtB,CAAC;oBACF,IAAI,QAAQ,GAAG,EAAE,CAAC,CAAC,8BAA8B;oBAEjD,IAAI,YAAY,CAAC,MAAM,IAAI,CAAC,EAAE;wBAC5B,MAAM,OAAO,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACnC,MAAM,OAAO,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAEnC,2BAA2B;wBAC3B,QAAQ,GAAG,iBAAiB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;qBAChD;oBAED,yEAAyE;oBACzE,MAAM,YAAY,GAAG,QAAQ,IAAI,GAAG,CAAC;oBAErC,OAAO,CAAC;wBACN,QAAQ;wBACR,YAAY;wBACZ,YAAY,EAAE,KAAK,CAAC,oCAAoC;qBACzD,CAAC,CAAC;iBACJ;aACF;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,KAAK,CAAC,CAAC;gBACrD,MAAM,CAAC,KAAK,CAAC,CAAC;aACf;QACH,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACrB,CAAC,CAAC,CAAC;AACL,CAAC;AAEM,KAAK,UAAU,uBAAuB,CAC3C,WAAmB,EACnB,SAAiB,EACjB,QAAgB,EAChB,YAAoB,EACpB,OAAe,EACf,cAA+B,EAC/B,WAAyC;;IAEzC,MAAM,cAAc,GAAiB,EAAE,CAAC;IAExC,mFAAmF;IACnF,MAAM,kBAAkB,GAAG,uBAAuB,CAAC;IAEnD,sCAAsC;IACtC,MAAM,oBAAoB,GAAG,yBAAyB,CAAC;IAEvD,IAAI,KAAK,CAAC;IACV,OACE,CAAC,KAAK,GAAG,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,IAAI;QACvD,CAAC,KAAK,GAAG,oBAAoB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,IAAI,EACzD;QACA,MAAM,QAAQ,GACZ,YAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,0CAAG,CAAC,CAAC;aAClC,WAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,eAAe,CAAC,0CAAG,CAAC,CAAC,EAAC;QAEvC,IAAI,QAAQ,EAAE;YACZ,MAAM,YAAY,GAAW,EAAE,CAAC;YAChC,IAAI;gBACF,0EAA0E;gBAC1E,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,YAAY,EAAE,GAC5C,MAAM,uBAAuB,CAC3B,QAAQ,EACR,YAAY,EACZ,OAAO,EACP,cAAc,EACd,WAAW,CACZ,CAAC;gBACJ,IAAI,CAAC,YAAY,EAAE;oBACjB,IAAI,YAAY,EAAE;wBAChB,cAAc,CAAC,IAAI,CAAC;4BAClB,SAAS;4BACT,QAAQ,EAAE,QAA+B;4BACzC,WAAW,EAAE,6BAA6B;4BAC1C,iBAAiB,EAAE,4FAA4F,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,mCAAmC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,cAAc,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,QAAQ;4BAC1P,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;4BACzB,QAAQ,EAAE;gCACR,WAAW,EAAE,WAAK,CAAC,KAAK,mCAAI,CAAC;gCAC7B,SAAS,EAAE,CAAC,WAAK,CAAC,KAAK,mCAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM;6BAChD;4BACD,YAAY,EAAE,YAAY;yBAC3B,CAAC,CAAC;qBACJ;yBAAM;wBACL,cAAc,CAAC,IAAI,CAAC;4BAClB,SAAS;4BACT,QAAQ,EAAE,QAA+B;4BACzC,WAAW,EAAE,8BAA8B;4BAC3C,iBAAiB,EAAE,kGAAkG,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,mCAAmC,YAAY,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,cAAc,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,QAAQ,QAAQ;4BAChQ,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;4BACzB,QAAQ,EAAE;gCACR,WAAW,EAAE,WAAK,CAAC,KAAK,mCAAI,CAAC;gCAC7B,SAAS,EAAE,CAAC,WAAK,CAAC,KAAK,mCAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM;6BAChD;4BACD,YAAY,EAAE,YAAY;yBAC3B,CAAC,CAAC;qBACJ;iBACF;aACF;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,KAAK,CAAC,2BAA2B,QAAQ,GAAG,EAAE,KAAK,CAAC,CAAC;aAC9D;SACF;KACF;IACD,OAAO,cAAc,CAAC;AACxB,CAAC;;;;;;;;;;;;;;;;;AChV+B;AAGzB,KAAK,UAAU,qBAAqB,CACzC,WAAmB,EACnB,SAAiB,EACjB,QAAgB,EAChB,KAAqB;IAErB,MAAM,cAAc,GAAiB,EAAE,CAAC;IAExC,2CAA2C;IAC3C,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;QACjB,OAAO,cAAc,CAAC;KACvB;IAED,iFAAiF;IACjF,MAAM,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;IAC3B,IAAI,qBAAqB,GAAG,KAAK,CAAC;IAClC,IAAI,SAAS,CAAC,IAAI,KAAK,UAAU,EAAE;QACjC,MAAM,OAAO,GAAG,SAAS,CAAC,MAAM,CAAC;QACjC,MAAM,MAAM,GAAU,0CAAM,CAAC,KAAK,CAAC,OAAO,CAAU,CAAC;QACrD,MAAM,UAAU,GAAQ,MAAM,CAAC,IAAI,CACjC,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,OAAO,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,MAAM,GAAG,CAAC,CACvE,CAAC;QACF,IAAI,UAAU,IAAI,UAAU,CAAC,IAAI,KAAK,SAAS,IAAI,UAAU,CAAC,KAAK,KAAK,CAAC,EAAE;YACzE,qBAAqB,GAAG,IAAI,CAAC;SAC9B;aAAM,IAAI,UAAU,IAAI,UAAU,CAAC,IAAI,KAAK,MAAM,EAAE;YACnD,MAAM,OAAO,GAAG,UAAU,CAAC,GAAG,IAAI,EAAE,CAAC;YACrC,qBAAqB,GAAG,0BAA0B,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAClE;KACF;IAED,IAAI,qBAAqB,EAAE;QACzB,OAAO,cAAc,CAAC;KACvB;IAED,4DAA4D;IAC5D,cAAc,CAAC,IAAI,CAAC;QAClB,SAAS,EAAE,CAAC;QACZ,QAAQ,EAAE,SAAS,CAAC,IAA2B;QAC/C,WAAW,EAAE,oBAAoB;QACjC,eAAe,EAAE,EAAE;KACpB,CAAC,CAAC;IAEH,OAAO,cAAc,CAAC;AACxB,CAAC;AAEM,KAAK,UAAU,uBAAuB,CAC3C,KAAqB;IAErB,MAAM,cAAc,GAAiB,EAAE,CAAC;IAExC,IAAI;QACF,wFAAwF;QACxF,wCAAwC;QACxC,MAAM,gBAAgB,GAKjB,EAAE,CAAC;QAER,mCAAmC;QACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;gBACrC,SAAS;aACV;YAED,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;YAC5B,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE;gBACnB,SAAS;aACV;YAED,kEAAkE;YAClE,MAAM,MAAM,GAAU,0CAAM,CAAC,KAAK,CAAC,OAAO,CAAU,CAAC;YACrD,IAAI,WAAW,GAAG,CAAC,CAAC;YACpB,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE;gBAC1B,IAAI,KAAK,GAAkB,IAAI,CAAC;gBAChC,IAAI,UAAU,GAAG,EAAE,CAAC;gBACpB,IAAI,IAAI,GAAG,EAAE,CAAC;gBAEd,IAAK,KAAa,CAAC,IAAI,KAAK,SAAS,EAAE;oBACrC,KAAK,GAAI,KAAa,CAAC,KAAK,CAAC;oBAC7B,UAAU,GAAI,KAAa,CAAC,GAAG,IAAI,EAAE,CAAC;oBACtC,IAAI,GAAI,KAAa,CAAC,IAAI,IAAI,EAAE,CAAC;iBAClC;qBAAM,IAAK,KAAa,CAAC,IAAI,KAAK,MAAM,EAAE;oBACzC,MAAM,OAAO,GAAI,KAAa,CAAC,GAAG,IAAI,EAAE,CAAC;oBACzC,MAAM,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC;oBAC3D,IAAI,CAAC,EAAE;wBACL,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;wBAC3B,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;wBAClB,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;qBAC3C;iBACF;gBAED,IAAI,KAAK,KAAK,IAAI,EAAE;oBAClB,yFAAyF;oBACzF,IACE,KAAK,KAAK,CAAC;wBACX,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC,EACvD;wBACA,SAAS;qBACV;oBAED,MAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,UAAU,EAAE,WAAW,CAAC,CAAC;oBACvD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;wBAChB,SAAS;qBACV;oBACD,MAAM,GAAG,GAAG,KAAK,GAAG,UAAU,CAAC,MAAM,CAAC;oBACtC,WAAW,GAAG,GAAG,CAAC;oBAElB,gBAAgB,CAAC,IAAI,CAAC;wBACpB,SAAS,EAAE,CAAC;wBACZ,KAAK;wBACL,OAAO,EAAE,IAAI;wBACb,IAAI,EAAE,UAAU;wBAChB,WAAW,EAAE,KAAK;wBAClB,SAAS,EAAE,GAAG;qBACR,CAAC,CAAC;iBACX;aACF;SACF;QAED,+CAA+C;QAC/C,gCAAgC;QAChC,MAAM,UAAU,GAAG,IAAI,GAAG,EAAoB,CAAC;QAC/C,MAAM,UAAU,GAAG,IAAI,GAAG,EAAoB,CAAC;QAE/C,6CAA6C;QAC7C,gBAAgB,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE;YAC1C,IAAI,OAAO,CAAC,KAAK,KAAK,CAAC,EAAE;gBACvB,MAAM,iBAAiB,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;gBAC/D,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE;oBACtC,UAAU,CAAC,GAAG,CAAC,iBAAiB,EAAE,EAAE,CAAC,CAAC;iBACvC;gBACD,UAAU,CAAC,GAAG,CAAC,iBAAiB,CAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAChD;iBAAM,IAAI,OAAO,CAAC,KAAK,KAAK,CAAC,EAAE;gBAC9B,MAAM,iBAAiB,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC;gBAC/D,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE;oBACtC,UAAU,CAAC,GAAG,CAAC,iBAAiB,EAAE,EAAE,CAAC,CAAC;iBACvC;gBACD,UAAU,CAAC,GAAG,CAAC,iBAAiB,CAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAChD;QACH,CAAC,CAAC,CAAC;QAEH,iCAAiC;QACjC,oDAAoD;QACpD,MAAM,YAAY,GAAG,gBAAgB;aAClC,GAAG,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAC3D,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;QAEjC,gEAAgE;QAChE,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;YAC3B,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBACpC,MAAM,OAAO,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC;gBACxC,cAAc,CAAC,IAAI,CAAC;oBAClB,SAAS,EAAE,OAAO,CAAC,SAAS;oBAC5B,QAAQ,EAAE,UAAU;oBACpB,WAAW,EAAE,qBAAqB;oBAClC,eAAe,EAAE,OAAO,CAAC,IAAI;oBAC7B,QAAQ,EAAE;wBACR,gBAAgB,EAAE,gBAAgB,CAAC,MAAM,CACvC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,CAAC,CACpC;wBACD,WAAW,EAAG,OAAe,CAAC,WAAW;wBACzC,SAAS,EAAG,OAAe,CAAC,SAAS;qBACtC;iBACF,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;SACJ;QAED,kCAAkC;QAClC,UAAU,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,EAAE;YACtC,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;gBACtB,2CAA2C;gBAC3C,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;oBAC/B,MAAM,OAAO,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC;oBACxC,cAAc,CAAC,IAAI,CAAC;wBAClB,SAAS,EAAE,OAAO,CAAC,SAAS;wBAC5B,QAAQ,EAAE,UAAU;wBACpB,WAAW,EAAE,sBAAsB;wBACnC,eAAe,EAAE,OAAO,CAAC,IAAI;wBAC7B,QAAQ,EAAE;4BACR,gBAAgB,EAAE,gBAAgB,CAAC,MAAM,CACvC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,CAAC,CACpC;4BACD,WAAW,EAAG,OAAe,CAAC,WAAW;4BACzC,SAAS,EAAG,OAAe,CAAC,SAAS;yBACtC;qBACF,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;aACJ;QACH,CAAC,CAAC,CAAC;QAEH,mDAAmD;QACnD,UAAU,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE;YACxC,IAAI,UAAU,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE;gBAC3B,kDAAkD;gBAClD,UAAU,CAAC,GAAG,CAAC,OAAO,CAAE,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;oBACvC,MAAM,OAAO,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC;oBACxC,cAAc,CAAC,IAAI,CAAC;wBAClB,SAAS,EAAE,OAAO,CAAC,SAAS;wBAC5B,QAAQ,EAAE,UAAU;wBACpB,WAAW,EAAE,yBAAyB;wBACtC,eAAe,EAAE,OAAO,CAAC,IAAI;wBAC7B,QAAQ,EAAE;4BACR,gBAAgB,EAAE,gBAAgB,CAAC,MAAM,CACvC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,CAAC,CACpC;4BACD,WAAW,EAAG,OAAe,CAAC,WAAW;4BACzC,SAAS,EAAG,OAAe,CAAC,SAAS;yBACtC;qBACF,CAAC,CAAC;gBACL,CAAC,CAAC,CAAC;aACJ;QACH,CAAC,CAAC,CAAC;QAEH,0DAA0D;QAC1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,gBAAgB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAChD,MAAM,OAAO,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC;YACpC,MAAM,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAExD,2BAA2B;YAC3B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE;gBAC3B,cAAc,CAAC,IAAI,CAAC;oBAClB,SAAS,EAAE,OAAO,CAAC,SAAS;oBAC5B,QAAQ,EAAE,UAAU;oBACpB,WAAW,EAAE,eAAe;oBAC5B,eAAe,EAAE,OAAO,CAAC,IAAI;oBAC7B,QAAQ,EAAE;wBACR,WAAW,EAAG,OAAe,CAAC,WAAW;wBACzC,SAAS,EAAG,OAAe,CAAC,SAAS;qBACtC;iBACF,CAAC,CAAC;aACJ;YAED,mDAAmD;YACnD,IAAI,CAAC,QAAQ,EAAE;gBACb,SAAS;aACV;YAED,wCAAwC;YACxC,sEAAsE;YACtE,+DAA+D;YAC/D,MAAM,SAAS,GAAG,OAAO,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;YACjD,IAAI,SAAS,GAAG,CAAC,EAAE;gBACjB,wCAAwC;gBACxC,cAAc,CAAC,IAAI,CAAC;oBAClB,SAAS,EAAE,OAAO,CAAC,SAAS;oBAC5B,QAAQ,EAAE,UAAU;oBACpB,WAAW,EAAE,qBAAqB;oBAClC,eAAe,EAAE,OAAO,CAAC,IAAI;oBAC7B,QAAQ,EAAE;wBACR,oBAAoB,EAAE,QAAQ,CAAC,KAAK;wBACpC,WAAW,EAAG,OAAe,CAAC,WAAW;wBACzC,SAAS,EAAG,OAAe,CAAC,SAAS;qBACtC;iBACF,CAAC,CAAC;aACJ;SACF;KACF;IAAC,OAAO,KAAK,EAAE;QACd,OAAO,CAAC,KAAK,CAAC,sCAAsC,EAAE,KAAK,CAAC,CAAC;KAC9D;IAED,OAAO,cAAc,CAAC;AACxB,CAAC;;;;;;;;;;;;;;;;;AC3QoC;AAGrC,KAAK,UAAU,cAAc,CAC3B,SAAiB,EACjB,oBAA4B,EAC5B,OAAe,EACf,cAA+B,EAC/B,WAAyC;IAEzC,MAAM,MAAM,GAAG,MAAM,gEAAsB,CAAC,KAAK,CAAC,CAAC;IACnD,IAAI;QACF,IAAI,WAAmB,CAAC;QAExB,2CAA2C;QAC3C,IAAI,SAAS,CAAC,UAAU,CAAC,aAAa,CAAC,EAAE;YACvC,IAAI,CAAC,WAAW,EAAE;gBAChB,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;aAC/D;YACD,MAAM,YAAY,GAAG,SAAS,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC/D,MAAM,IAAI,GAAG,WAAW,CAAC,YAAY,CAAC,CAAC;YACvC,IAAI,OAAO,GAAkB,IAAI,CAAC;YAElC,IAAI,IAAI,EAAE;gBACR,KAAK,MAAM,QAAQ,IAAI,IAAI,EAAE;oBAC3B,IAAI,QAAQ,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;wBACjC,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;wBAC9B,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;4BAC9B,OAAO,GAAG,QAAQ,QAAQ,WAAW,MAAM,EAAE,CAAC;4BAC9C,MAAM;yBACP;qBACF;iBACF;aACF;YAED,IAAI,CAAC,OAAO,EAAE;gBACZ,MAAM,IAAI,KAAK,CAAC,8BAA8B,YAAY,EAAE,CAAC,CAAC;aAC/D;YACD,WAAW,GAAG,OAAO,CAAC;SACvB;aAAM;YACL,WAAW,GAAG,SAAS,CAAC,UAAU,CAAC,MAAM,CAAC;gBACxC,CAAC,CAAC,SAAS;gBACX,CAAC,CAAC,OAAO;oBACP,CAAC,CAAC,GAAG,OAAO,SAAS,oBAAoB,IAAI,SAAS,EAAE;oBACxD,CAAC,CAAC,GAAG,oBAAoB,IAAI,SAAS,EAAE,CAAC,CAAC,sBAAsB;SACrE;QAED,uEAAuE;QACvE,MAAM,GAAG,GAAG,MAAM,cAAc,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;QAExD,MAAM,EACJ,IAAI,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,EAC3B,GAAG,MAAM,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;QAEhC,IAAI,CAAC,IAAI,EAAE;YACT,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;SAC/C;QACD,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC;KAC7B;YAAS;QACR,MAAM,MAAM,CAAC,SAAS,EAAE,CAAC;KAC1B;AACH,CAAC;AAEM,KAAK,UAAU,uBAAuB,CAC3C,WAAmB,EACnB,SAAiB,EACjB,QAAgB,EAChB,YAAoB,EACpB,OAAe,EACf,cAA+B,EAC/B,WAAyC;;IAEzC,MAAM,cAAc,GAAiB,EAAE,CAAC;IAExC,uDAAuD;IACvD,MAAM,uBAAuB,GAAG,iBAAiB,CAAC;IAElD,mEAAmE;IACnE,MAAM,yBAAyB,GAAG,oCAAoC,CAAC;IACvE,MAAM,oBAAoB,GAAG,6BAA6B,CAAC;IAC3D,4EAA4E;IAC5E,MAAM,OAAO,GAAG;QACd,uBAAuB;QACvB,yBAAyB;QACzB,oBAAoB;KACrB,CAAC;IAEF,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;QAC3B,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC;QACpB,IAAI,KAA6B,CAAC;QAClC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,IAAI,EAAE;YACjD,MAAM,QAAQ,GACZ,YAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,0CAAG,CAAC,CAAC;iBAClC,WAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,sBAAsB,CAAC,0CAAG,CAAC,CAAC,EAAC;YAC9C,IAAI,CAAC,QAAQ,EAAE;gBACb,SAAS;aACV;YAED,MAAM,OAAO,GAAG,mBAAmB,CAAC;YACpC,MAAM,KAAK,GAAG,WAAK,CAAC,KAAK,mCAAI,CAAC,CAAC;YAC/B,MAAM,GAAG,GAAG,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YAEpC,IAAI,YAAY,GAAW,EAAE,CAAC;YAC9B,IAAI;gBACF,uDAAuD;gBACvD,+EAA+E;gBAC/E,IAAI,OAAO,EAAE;oBACX,MAAM,SAAS,GAAG,MAAM,cAAc,CACpC,QAAQ,EACR,YAAY,EACZ,OAAO,EACP,cAAc,EACd,WAAW,CACZ,CAAC;oBACF,IAAI,SAAS,CAAC,UAAU,GAAG,EAAE,EAAE;wBAC7B,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC;qBAC/B;iBACF;aACF;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,KAAK,CAAC,2BAA2B,QAAQ,GAAG,EAAE,KAAK,CAAC,CAAC;aAC9D;oBAAS;gBACR,cAAc,CAAC,IAAI,CAAC;oBAClB,SAAS;oBACT,QAAQ,EAAE,QAA+B;oBACzC,WAAW,EAAE,OAAO;oBACpB,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;oBACzB,YAAY,EAAE,YAAY;oBAC1B,QAAQ,EAAE;wBACR,OAAO,EAAE,QAAQ,SAAS,IAAI,OAAO,KAAK,KAAK,IAAI,GAAG,EAAE;wBACxD,WAAW,EAAE,KAAK;wBAClB,SAAS,EAAE,GAAG;qBACf;iBACF,CAAC,CAAC;aACJ;SACF;KACF;IACD,OAAO,cAAc,CAAC;AACxB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;ACzI0B;AACA;AACE;AACF;AACD;;;;;;;;;;;;;;;ACF1B,MAAM,aAAa,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;AAChE,MAAM,qBAAqB,GAAG,EAAE,CAAC;AAEjC,SAAS,SAAS,CAAC,IAAY;IAC7B,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;IACtB,OAAO,uBAAuB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACzC,CAAC;AAED,SAAS,mBAAmB,CAAC,IAAY;IACvC,MAAM,KAAK,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;IACjC,OAAO,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AACpD,CAAC;AAED,SAAS,WAAW,CAAC,GAAW,EAAE,IAAY;IAC5C,iCAAiC;IACjC,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,IAAI,GAAG,oBAAoB,EAAE,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACjE,OAAO,CAAC;QACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;QAC9D,CAAC,CAAC,IAAI,CAAC;AACX,CAAC;AAEM,SAAS,sBAAsB,CACpC,WAAmB,EACnB,SAAiB,EACjB,QAAgB;;IAEhB,MAAM,MAAM,GAAiB,EAAE,CAAC;IAEhC,8BAA8B;IAC9B,MAAM,MAAM,GAAG,iCAAiC,CAAC;IACjD,IAAI,KAA6B,CAAC;IAClC,OAAO,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,IAAI,EAAE;QAClD,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACtB,MAAM,IAAI,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;QACrC,MAAM,KAAK,GAAG,WAAK,CAAC,KAAK,mCAAI,CAAC,CAAC;QAC/B,MAAM,GAAG,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAChC,MAAM,SAAS,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,SAAS,EAAE;YACb,MAAM,CAAC,IAAI,CAAC;gBACV,SAAS;gBACT,QAAQ,EAAE,QAA+B;gBACzC,WAAW,EAAE,uBAAuB;gBACpC,eAAe,EAAE,IAAI;gBACrB,QAAQ,EAAE;oBACR,OAAO,EAAE,QAAQ,SAAS,2BAA2B,KAAK,IAAI,GAAG,EAAE;oBACnE,WAAW,EAAE,KAAK;oBAClB,SAAS,EAAE,GAAG;iBACf;aACF,CAAC,CAAC;SACJ;KACF;IAED,8BAA8B;IAC9B,MAAM,QAAQ,GAAG,mCAAmC,CAAC;IACrD,OAAO,CAAC,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,IAAI,EAAE;QACpD,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACtB,MAAM,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;QAC9D,MAAM,QAAQ,GAAG,WAAK,CAAC,KAAK,mCAAI,CAAC,CAAC;QAClC,MAAM,MAAM,GAAG,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC;QAEtC,6BAA6B;QAC7B,MAAM,eAAe,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjD,MAAM,UAAU,GAAG,eAAe,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC7D,MAAM,IAAI,GAAG,WAAW,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;QACnD,MAAM,KAAK,GAAG,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;QAExD,qEAAqE;QACrE,MAAM,OAAO,GAAG,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;QACxC,MAAM,YAAY,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;QACtC,IAAI,CAAC,OAAO,IAAI,CAAC,YAAY,EAAE;YAC7B,MAAM,CAAC,IAAI,CAAC;gBACV,SAAS;gBACT,QAAQ,EAAE,QAA+B;gBACzC,WAAW,EAAE,uBAAuB;gBACpC,eAAe,EAAE,IAAI;gBACrB,QAAQ,EAAE;oBACR,OAAO,EAAE,QAAQ,SAAS,2BAA2B,QAAQ,IAAI,MAAM,EAAE;oBACzE,WAAW,EAAE,QAAQ;oBACrB,SAAS,EAAE,MAAM;iBAClB;aACF,CAAC,CAAC;YACH,SAAS;SACV;QAED,MAAM,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;QACpC,IAAI,SAAS,EAAE;YACb,MAAM,CAAC,IAAI,CAAC;gBACV,SAAS;gBACT,QAAQ,EAAE,QAA+B;gBACzC,WAAW,EAAE,uBAAuB;gBACpC,eAAe,EAAE,IAAI;gBACrB,QAAQ,EAAE;oBACR,OAAO,EAAE,QAAQ,SAAS,2BAA2B,QAAQ,IAAI,MAAM,EAAE;oBACzE,WAAW,EAAE,QAAQ;oBACrB,SAAS,EAAE,MAAM;iBAClB;aACF,CAAC,CAAC;SACJ;KACF;IAED,OAAO,MAAM,CAAC;AAChB,CAAC;AAED,SAAS,UAAU,CAAC,IAAY;IAC9B,+BAA+B;IAC/B,IAAI,SAAS,CAAC,IAAI,CAAC,EAAE;QACnB,OAAO,IAAI,CAAC;KACb;IACD,oDAAoD;IACpD,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,MAAM,GAAG,qBAAqB,CAAC;IAC5D,MAAM,QAAQ,GAAG,mBAAmB,CAAC,IAAI,CAAC,CAAC;IAC3C,OAAO,QAAQ,IAAI,QAAQ,CAAC;AAC9B,CAAC;;;;;;;;;;;;;;;;AChHM,SAAS,uBAAuB,CACrC,WAAmB,EACnB,SAAiB,EACjB,QAAgB;;IAEhB,MAAM,cAAc,GAAiB,EAAE,CAAC;IAExC,mCAAmC;IACnC,MAAM,mBAAmB,GACvB,sDAAsD,CAAC;IACzD,IAAI,KAAK,CAAC;IACV,OAAO,CAAC,KAAK,GAAG,mBAAmB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,IAAI,EAAE;QAC/D,MAAM,KAAK,GAAG,WAAK,CAAC,KAAK,mCAAI,CAAC,CAAC;QAC/B,MAAM,GAAG,GAAG,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QACpC,cAAc,CAAC,IAAI,CAAC;YAClB,SAAS;YACT,QAAQ,EAAE,QAA+B;YACzC,WAAW,EAAE,sBAAsB;YACnC,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;YACzB,QAAQ,EAAE;gBACR,WAAW,EAAE,KAAK;gBAClB,SAAS,EAAE,GAAG;aACf;SACF,CAAC,CAAC;KACJ;IAED,wCAAwC;IACxC,MAAM,wBAAwB,GAC5B,2DAA2D,CAAC;IAC9D,OAAO,CAAC,KAAK,GAAG,wBAAwB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,IAAI,EAAE;QACpE,MAAM,KAAK,GAAG,WAAK,CAAC,KAAK,mCAAI,CAAC,CAAC;QAC/B,MAAM,GAAG,GAAG,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QACpC,cAAc,CAAC,IAAI,CAAC;YAClB,SAAS;YACT,QAAQ,EAAE,QAA+B;YACzC,WAAW,EAAE,uBAAuB;YACpC,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;YACzB,QAAQ,EAAE;gBACR,WAAW,EAAE,KAAK;gBAClB,SAAS,EAAE,GAAG;aACf;SACF,CAAC,CAAC;KACJ;IAED,6DAA6D;IAC7D,uDAAuD;IACvD,MAAM,gBAAgB,GAAG,iCAAiC,CAAC;IAC3D,OAAO,CAAC,KAAK,GAAG,gBAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,IAAI,EAAE;QAC5D,MAAM,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QAC3B,MAAM,KAAK,GAAG,WAAK,CAAC,KAAK,mCAAI,CAAC,CAAC;QAC/B,MAAM,GAAG,GAAG,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QAEpC,qCAAqC;QACrC,MAAM,OAAO,GAAG,iBAAiB,CAAC;QAClC,IAAI,OAAO,CAAC;QACZ,IAAI,eAAe,GAAG,KAAK,CAAC;QAE5B,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,KAAK,IAAI,EAAE;YACnD,MAAM,UAAU,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;gBAChD,eAAe,GAAG,IAAI,CAAC;gBACvB,MAAM,CAAC,4BAA4B;aACpC;SACF;QAED,IAAI,eAAe,EAAE;YACnB,cAAc,CAAC,IAAI,CAAC;gBAClB,SAAS;gBACT,QAAQ,EAAE,QAA+B;gBACzC,WAAW,EAAE,qBAAqB;gBAClC,eAAe,EAAE,SAAS;gBAC1B,QAAQ,EAAE;oBACR,WAAW,EAAE,KAAK;oBAClB,SAAS,EAAE,GAAG;iBACf;aACF,CAAC,CAAC;SACJ;KACF;IAED,OAAO,cAAc,CAAC;AACxB,CAAC;AAEM,KAAK,UAAU,kBAAkB,CACtC,KAAqB;IAErB,MAAM,cAAc,GAAiB,EAAE,CAAC;IAExC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACrC,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACtB,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;YACrC,SAAS;SACV;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;QAC5B,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE;YACnB,SAAS;SACV;QAED,MAAM,UAAU,GAAG,uBAAuB,CAAC,OAAO,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC;QACnE,cAAc,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC,CAAC;KACpC;IAED,OAAO,cAAc,CAAC;AACxB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzG0B;AACE;AACO;AACM;AACV;AACI;AACA;AACU;AACE;AAChD,uGAAuG;;;;;;;;;;;;;;;ACPvG;;;GAGG;AACI,SAAS,sBAAsB,CAAC,YAAiB;IACtD,IAAI,CAAC,YAAY,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,CAAC,EAAE;QACvD,OAAO,CAAC,IAAI,CAAC,qDAAqD,CAAC,CAAC;QACpE,OAAO,EAAE,CAAC;KACX;IAED,OAAO,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAS,EAAE,KAAa,EAAE,EAAE;QACzD,oEAAoE;QACpE,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;YAC9B,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SAC/B;aAAM,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,QAAQ,EAAE;YAC1C,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;SACtB;QAED,sBAAsB;QACtB,MAAM,IAAI,GACR,IAAI,CAAC,SAAS,KAAK,UAAU;YAC7B,IAAI,CAAC,SAAS,KAAK,MAAM;YACzB,IAAI,CAAC,SAAS,KAAK,KAAK;YACtB,CAAC,CAAC,IAAI,CAAC,SAAS;YAChB,CAAC,CAAC,KAAK,CAAC,CAAC,WAAW;QAExB,OAAO;YACL,SAAS,EAAE,KAAK;YAChB,IAAI;YACJ,MAAM;YACN,WAAW,EAAE,IAAI,CAAC,WAAW;SAC9B,CAAC;IACJ,CAAC,CAAC,CAAC;AACL,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEpCgC;AASjC,KAAK,UAAU,kBAAkB,CAAC,QAAgB;IAChD;;;OAGG;IAEH,MAAM,QAAQ,GAAG,MAAM,0CAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,YAAY,EAAE,MAAM,EAAE,CAAC,CAAC;IACpE,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAY,CAAC;IAExC,OAAO,IAAI,OAAO,CAAS,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QAC7C,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;QACxB,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC;QAE9B,GAAG,CAAC,MAAM,GAAG,GAAG,EAAE;YAChB,+BAA+B;YAC/B,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;YAChD,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAEpC,IAAI,CAAC,GAAG,EAAE;gBACR,MAAM,CAAC,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC,CAAC;gBAClD,OAAO;aACR;YAED,gCAAgC;YAChC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;YACzB,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;YAE3B,8DAA8D;YAC9D,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC;YACxB,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;YAEhD,2BAA2B;YAC3B,GAAG,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEzB,kEAAkE;YAClE,MAAM,WAAW,GAAG,MAAM,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;YAEzD,kEAAkE;YAClE,MAAM,YAAY,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/C,OAAO,CAAC,YAAY,CAAC,CAAC;QACxB,CAAC,CAAC;QAEF,GAAG,CAAC,OAAO,GAAG,GAAG,EAAE;YACjB,MAAM,CAAC,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC,CAAC;QAC5C,CAAC,CAAC;QAEF,0CAA0C;QAC1C,MAAM,SAAS,GAAG,GAAG,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;QACjD,GAAG,CAAC,GAAG,GAAG,SAAS,CAAC;IACtB,CAAC,CAAC,CAAC;AACL,CAAC;AAEM,KAAK,UAAU,qBAAqB,CACzC,KAAiB,EACjB,SAAiB,EACjB,cAA8B;IAE9B,IAAI,MAAM,GACR,sJAAsJ,CAAC;IACzJ,MAAM,IAAI,cAAc,KAAK,CAAC,eAAe,MAAM,CAAC;IAEpD,sEAAsE;IACtE,IAAI;QACF,MAAM,QAAQ,GAAG,SAAS,CAAC,UAAU,CAAC,YAAY,CAAC;YACjD,CAAC,CAAC,SAAS;YACX,CAAC,CAAC,0BAA0B,MAAM,kBAAkB,CAAC,SAAS,CAAC,EAAE,CAAC;QAEpE,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;YAC1B,KAAK,EAAE,cAAc,CAAC,KAAK;YAC3B,QAAQ,EAAE;gBACR;oBACE,IAAI,EAAE,QAAQ;oBACd,OAAO,EACL,iEAAiE;iBACpE;gBACD;oBACE,IAAI,EAAE,MAAM;oBACZ,OAAO,EAAE;wBACP;4BACE,IAAI,EAAE,MAAM;4BACZ,IAAI,EAAE,MAAM;yBACb;wBACD;4BACE,IAAI,EAAE,WAAW;4BACjB,SAAS,EAAE;gCACT,GAAG,EAAE,QAAQ;6BACd;yBACF;qBACF;iBACF;aACF;YACD,UAAU,EAAE,GAAG;SAChB,CAAC,CAAC;QAEH,MAAM,QAAQ,GAAG,MAAM,0CAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,EAAE;YAC7D,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;gBAClC,aAAa,EAAE,UAAU,cAAc,CAAC,MAAM,EAAE;aACjD;SACF,CAAC,CAAC;QAEH,sDAAsD;QACtD,IACE,QAAQ,CAAC,IAAI,CAAC,OAAO;YACrB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACxB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,EAChC;YACA,MAAM,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC;YAC9D,OAAO,YAAY,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,wBAAwB,CAAC;SACtE;aAAM;YACL,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC/D,OAAO,wBAAwB,CAAC;SACjC;KACF;IAAC,OAAO,KAAK,EAAE;QACd,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,KAAK,CAAC,CAAC;QACnD,OAAO,OAAO,CAAC;KAChB;AACH,CAAC;AAEM,KAAK,UAAU,yBAAyB,CAC7C,KAAiB,EACjB,gBAAgC;IAEhC,MAAM,MAAM,GAAG;MACX,KAAK,CAAC,eAAe,EAAE,CAAC;IAE5B,sEAAsE;IACtE,IAAI;QACF,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;YAC1B,KAAK,EAAE,gBAAgB,CAAC,KAAK;YAC7B,QAAQ,EAAE;gBACR;oBACE,IAAI,EAAE,QAAQ;oBACd,OAAO,EACL,sEAAsE;iBACzE;gBACD;oBACE,IAAI,EAAE,MAAM;oBACZ,OAAO,EAAE,MAAM;iBAChB;aACF;YACD,UAAU,EAAE,GAAG;SAChB,CAAC,CAAC;QAEH,MAAM,QAAQ,GAAG,MAAM,0CAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,EAAE;YAC/D,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;gBAClC,aAAa,EAAE,UAAU,gBAAgB,CAAC,MAAM,EAAE;aACnD;SACF,CAAC,CAAC;QAEH,sDAAsD;QACtD,IACE,QAAQ,CAAC,IAAI,CAAC,OAAO;YACrB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACxB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,EAChC;YACA,MAAM,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC;YAC9D,OAAO,YAAY,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,wBAAwB,CAAC;SACtE;aAAM;YACL,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC/D,OAAO,wBAAwB,CAAC;SACjC;KACF;IAAC,OAAO,KAAK,EAAE;QACd,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,KAAK,CAAC,CAAC;QACnD,OAAO,OAAO,CAAC;KAChB;AACH,CAAC;AAEM,KAAK,UAAU,cAAc,CAClC,MAAc,EACd,QAAwB,EACxB,gBAAwB,8BAA8B;IAEtD,IAAI;QACF,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC;YAC1B,KAAK,EAAE,QAAQ,CAAC,KAAK;YACrB,QAAQ,EAAE;gBACR;oBACE,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE,aAAa;iBACvB;gBACD;oBACE,IAAI,EAAE,MAAM;oBACZ,OAAO,EAAE,MAAM;iBAChB;aACF;YACD,UAAU,EAAE,IAAI;SACjB,CAAC,CAAC;QAEH,MAAM,QAAQ,GAAG,MAAM,0CAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,IAAI,EAAE;YACvD,OAAO,EAAE;gBACP,cAAc,EAAE,kBAAkB;gBAClC,aAAa,EAAE,UAAU,QAAQ,CAAC,MAAM,EAAE;aAC3C;SACF,CAAC,CAAC;QAEH,IACE,QAAQ,CAAC,IAAI,CAAC,OAAO;YACrB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACxB,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,EAChC;YACA,MAAM,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC;YAC9D,OAAO,YAAY,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,wBAAwB,CAAC;SACtE;aAAM;YACL,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC/D,OAAO,wBAAwB,CAAC;SACjC;KACF;IAAC,OAAO,KAAK,EAAE;QACd,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,KAAK,CAAC,CAAC;QACnD,OAAO,OAAO,CAAC;KAChB;AACH,CAAC;;;;;;;;;;;;;;;;ACtNM,SAAS,eAAe,CAC7B,KAAiB,EACjB,YAAoB;;IAEpB,MAAM,KAAK,GAAG,MAAC,WAAK,CAAC,QAAQ,0CAAE,WAAkC,mCAAI,IAAI,CAAC;IAC1E,MAAM,GAAG,GAAG,MAAC,WAAK,CAAC,QAAQ,0CAAE,SAAgC,mCAAI,IAAI,CAAC;IAEtE,IACE,KAAK,KAAK,IAAI;QACd,GAAG,KAAK,IAAI;QACZ,KAAK,CAAC,KAAK,CAAC;QACZ,KAAK,CAAC,GAAG,CAAC;QACV,KAAK,GAAG,CAAC;QACT,GAAG,GAAG,YAAY;QAClB,KAAK,IAAI,GAAG,EACZ;QACA,OAAO,IAAI,CAAC;KACb;IACD,OAAO,EAAE,WAAW,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC;AAChD,CAAC;AAEM,SAAS,YAAY,CAC1B,MAAc,EACd,KAAa,EACb,GAAW,EACX,WAAmB;IAEnB,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAClE,CAAC;;;;;;;;;;;;;;;;;;ACnCgE;AAOjE,SAAS,sBAAsB,CAAC,OAAe;IAC7C,qCAAqC;IACrC,MAAM,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACtC,IAAI,QAAQ,KAAK,CAAC,CAAC,EAAE;QACnB,OAAO,CAAC,CAAC;KACV;IACD,MAAM,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,WAAW,EAAE,CAAC;IAC5D,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;IAEhD,IAAI,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;QAC9B,4CAA4C;QAC5C,MAAM,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC;QAC3B,MAAM,OAAO,GAAG,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3E,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;KAC5C;IAED,sDAAsD;IACtD,IAAI;QACF,OAAO,kBAAkB,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;KAC3C;IAAC,WAAM;QACN,OAAO,OAAO,CAAC,MAAM,CAAC;KACvB;AACH,CAAC;AAED,SAAS,mBAAmB,CAC1B,GAAY,EACZ,GAAgC;;IAEhC,IAAI,CAAC,GAAG,EAAE;QACR,OAAO;KACR;IACD,IAAI,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;QAC3B,MAAM,KAAK,GAAG,SAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,eAAe,mCAAI,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,iBAAiB;QACzE,MAAM,IAAI,GAAG,sBAAsB,CAAC,GAAG,CAAC,CAAC;QACzC,IAAI,IAAI,GAAG,KAAK,EAAE;YAChB,MAAM,IAAI,KAAK,CACb,2BAA2B,IAAI,YAAY,KAAK,SAAS,CAC1D,CAAC;SACH;KACF;AACH,CAAC;AAEM,KAAK,UAAU,GAAG,CACvB,GAAW,EACX,MAAmC;IAEnC,mBAAmB,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;IACjC,OAAO,6CAAK,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAA0B,CAAC;AACzD,CAAC;AAEM,KAAK,UAAU,IAAI,CACxB,GAAW,EACX,IAAU,EACV,MAAmC;IAEnC,mBAAmB,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;IACjC,OAAO,6CAAK,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,MAAM,CAA0B,CAAC;AAChE,CAAC;AAEM,MAAM,IAAI,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC;;;;;;;;;;;;;;;AC3ClC,SAAS,gBAAgB,CAAC,GAAY;IACpC,IAAI,CAAC,GAAG,EAAE;QACR,OAAO,EAAE,CAAC;KACX;IACD,MAAM,OAAO,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;IAChD,OAAO,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AACnC,CAAC;AAEM,SAAS,cAAc,CAAC,MAAoB;IACjD,MAAM,iBAAiB,GAA2B,EAAE,CAAC;IACrD,MAAM,SAAS,GAAgB,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;QAChD,iBAAiB,CAAC,KAAK,CAAC,WAAW,CAAC;YAClC,CAAC,iBAAiB,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QAClD,OAAO;YACL,WAAW,EAAE,KAAK,CAAC,WAAW;YAC9B,SAAS,EAAE,KAAK,CAAC,SAAS;YAC1B,QAAQ,EAAE,KAAK,CAAC,QAAQ;YACxB,WAAW,EAAE,KAAK,CAAC,iBAAiB,IAAI,EAAE;YAC1C,cAAc,EAAE,gBAAgB,CAAC,KAAK,CAAC,eAAe,CAAC;SACxD,CAAC;IACJ,CAAC,CAAC,CAAC;IAEH,MAAM,YAAY,GAAsB,MAAM,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAC3E,CAAC,CAAC,WAAW,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CACnD,CAAC;IAEF,OAAO;QACL,OAAO,EAAE;YACP,WAAW,EAAE,MAAM,CAAC,MAAM;YAC1B,iBAAiB,EAAE,YAAY;SAChC;QACD,MAAM,EAAE,SAAS;KAClB,CAAC;AACJ,CAAC;;;;;;;;;;;;;;;;;ACtDM,MAAM,kBAAkB,GAAG;IAChC,QAAQ;IACR,UAAU;IACV,OAAO;IACP,QAAQ;IACR,OAAO;IACP,OAAO;IACP,OAAO;CACR,CAAC;AAEK,MAAM,eAAe,GAAG,IAAI,GAAG,CAAiB;IACrD,YAAY;IACZ,CAAC,mBAAmB,EAAE,QAAQ,CAAC;IAE/B,oBAAoB;IACpB,CAAC,oBAAoB,EAAE,UAAU,CAAC;IAClC,CAAC,qBAAqB,EAAE,UAAU,CAAC;IACnC,CAAC,mBAAmB,EAAE,UAAU,CAAC;IACjC,CAAC,sBAAsB,EAAE,UAAU,CAAC;IACpC,CAAC,yBAAyB,EAAE,UAAU,CAAC;IACvC,CAAC,qBAAqB,EAAE,UAAU,CAAC;IACnC,CAAC,eAAe,EAAE,UAAU,CAAC;IAE7B,kBAAkB;IAClB,CAAC,sBAAsB,EAAE,QAAQ,CAAC;IAClC,CAAC,uBAAuB,EAAE,QAAQ,CAAC;IACnC,CAAC,qBAAqB,EAAE,QAAQ,CAAC;IAEjC,iBAAiB;IACjB,CAAC,8BAA8B,EAAE,OAAO,CAAC;IACzC,CAAC,6BAA6B,EAAE,OAAO,CAAC;IACxC,cAAc;IAEd,cAAc;IACd,CAAC,uBAAuB,EAAE,OAAO,CAAC;IAElC,cAAc;CACf,CAAC,CAAC;AAEI,MAAM,kBAAkB,GAAG,IAAI,GAAG,CAA4B;IACnE,YAAY;IACZ;QACE,mBAAmB;QACnB;YACE,KAAK,EAAE,kBAAkB;YACzB,WAAW,EACT,iGAAiG;YACnG,mBAAmB,EACjB,gWAAgW;YAClW,cAAc,EAAE,qDAAqD;SACtE;KACF;IAED,oBAAoB;IACpB;QACE,oBAAoB;QACpB;YACE,KAAK,EAAE,oBAAoB;YAC3B,WAAW,EACT,+DAA+D;YACjE,mBAAmB,EACjB,4dAA4d;YAC9d,cAAc,EACZ,gEAAgE;SACnE;KACF;IACD;QACE,qBAAqB;QACrB;YACE,KAAK,EAAE,sBAAsB;YAC7B,WAAW,EACT,kEAAkE;YACpE,mBAAmB,EACjB,2OAA2O;SAC9O;KACF;IACD;QACE,sBAAsB;QACtB;YACE,KAAK,EAAE,sBAAsB;YAC7B,WAAW,EAAE,4CAA4C;YACzD,mBAAmB,EACjB,mLAAmL;SACtL;KACF;IACD;QACE,yBAAyB;QACzB;YACE,KAAK,EAAE,6BAA6B;YACpC,WAAW,EAAE,uDAAuD;YACpE,mBAAmB,EACjB,6JAA6J;SAChK;KACF;IACD;QACE,qBAAqB;QACrB;YACE,KAAK,EAAE,qBAAqB;YAC5B,WAAW,EACT,+HAA+H;YACjI,mBAAmB,EACjB,mTAAmT;YACrT,cAAc,EACZ,6DAA6D;SAChE;KACF;IACD;QACE,eAAe;QACf;YACE,KAAK,EAAE,eAAe;YACtB,WAAW,EAAE,iDAAiD;YAC9D,mBAAmB,EACjB,yQAAyQ;YAC3Q,cAAc,EAAE,yDAAyD;SAC1E;KACF;IAED,kBAAkB;IAClB;QACE,sBAAsB;QACtB;YACE,KAAK,EAAE,sBAAsB;YAC7B,WAAW,EAAE,yDAAyD;YACtE,mBAAmB,EACjB,qOAAqO;SACxO;KACF;IACD;QACE,uBAAuB;QACvB;YACE,KAAK,EAAE,uBAAuB;YAC9B,WAAW,EAAE,oCAAoC;YACjD,mBAAmB,EACjB,mNAAmN;SACtN;KACF;IACD;QACE,qBAAqB;QACrB;YACE,KAAK,EAAE,qBAAqB;YAC5B,WAAW,EAAE,4CAA4C;YACzD,mBAAmB,EAAE,0CAA0C;SAChE;KACF;IAED,iBAAiB;IACjB;QACE,8BAA8B;QAC9B;YACE,KAAK,EAAE,6BAA6B;YACpC,WAAW,EACT,+DAA+D;YACjE,mBAAmB,EACjB,2MAA2M;YAC7M,cAAc,EAAE,0DAA0D;SAC3E;KACF;IACD;QACE,6BAA6B;QAC7B;YACE,KAAK,EAAE,6BAA6B;YACpC,WAAW,EACT,qEAAqE;YACvE,mBAAmB,EACjB,kOAAkO;YACpO,cAAc,EAAE,0DAA0D;SAC3E;KACF;IACD,cAAc;IAEd,cAAc;IACd;QACE,uBAAuB;QACvB;YACE,KAAK,EAAE,2BAA2B;YAClC,WAAW,EACT,4HAA4H;YAC9H,mBAAmB,EACjB,yMAAyM;YAC3M,cAAc,EACZ,0EAA0E;SAC7E;KACF;IAED,cAAc;CACf,CAAC,CAAC","sources":["webpack://jupyterlab-a11y-checker/../core/src/detection/base.ts","webpack://jupyterlab-a11y-checker/../core/src/detection/category/color.ts","webpack://jupyterlab-a11y-checker/../core/src/detection/category/heading.ts","webpack://jupyterlab-a11y-checker/../core/src/detection/category/image.ts","webpack://jupyterlab-a11y-checker/../core/src/detection/category/index.ts","webpack://jupyterlab-a11y-checker/../core/src/detection/category/link.ts","webpack://jupyterlab-a11y-checker/../core/src/detection/category/table.ts","webpack://jupyterlab-a11y-checker/../core/src/index.ts","webpack://jupyterlab-a11y-checker/../core/src/parsers.ts","webpack://jupyterlab-a11y-checker/../core/src/types.ts","webpack://jupyterlab-a11y-checker/../core/src/utils/ai-utils.ts","webpack://jupyterlab-a11y-checker/../core/src/utils/edit.ts","webpack://jupyterlab-a11y-checker/../core/src/utils/http.ts","webpack://jupyterlab-a11y-checker/../core/src/utils/issueFormatter.ts","webpack://jupyterlab-a11y-checker/../core/src/utils/metadata.ts"],"sourcesContent":["import axe from 'axe-core';\nimport { marked } from 'marked';\nimport { ICellIssue, IGeneralCell, IImageProcessor } from '../types.js';\nimport {\n  detectHeadingOneIssue,\n  analyzeHeadingHierarchy\n} from './category/heading.js';\nimport { detectImageIssuesInCell } from './category/index.js';\nimport { detectTableIssuesInCell } from './category/index.js';\nimport { detectColorIssuesInCell } from './category/index.js';\nimport { detectLinkIssuesInCell } from './category/index.js';\n\nexport async function analyzeCellsAccessibility(\n  cells: IGeneralCell[],\n  documentContext: Document,\n  baseUrl: string,\n  imageProcessor: IImageProcessor,\n  notebookPath: string = ''\n): Promise<ICellIssue[]> {\n  const notebookIssues: ICellIssue[] = [];\n\n  // Add heading one check\n  notebookIssues.push(\n    ...(await detectHeadingOneIssue('', 0, 'markdown', cells))\n  );\n\n  const tempDiv = documentContext.createElement('div');\n  documentContext.body.appendChild(tempDiv);\n\n  const axeConfig: axe.RunOptions = {\n    runOnly: ['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa'],\n    rules: {\n      'image-alt': { enabled: false },\n      'empty-heading': { enabled: false },\n      'heading-order': { enabled: false },\n      'page-has-heading-one': { enabled: false },\n      'link-name': { enabled: false }\n    }\n  };\n\n  try {\n    // First, analyze heading hierarchy across the notebook\n    const headingIssues = await analyzeHeadingHierarchy(cells);\n    notebookIssues.push(...headingIssues);\n\n    // Then analyze individual cells for other issues\n    for (let i = 0; i < cells.length; i++) {\n      const cell = cells[i];\n      if (!cell) {\n        console.warn(`Skipping cell ${i}: Invalid cell or model`);\n        continue;\n      }\n\n      const cellType = cell.type;\n      if (cellType === 'markdown') {\n        const rawMarkdown = cell.source;\n        if (rawMarkdown.trim()) {\n          tempDiv.innerHTML = await marked.parse(rawMarkdown);\n\n          const results = await axe.run(tempDiv, axeConfig);\n          const violations = results.violations;\n\n          // Can have multiple violations in a single cell\n          if (violations.length > 0) {\n            violations.forEach(violation => {\n              violation.nodes.forEach(node => {\n                notebookIssues.push({\n                  cellIndex: i,\n                  cellType: cellType,\n                  violationId: violation.id,\n                  issueContentRaw: node.html\n                });\n              });\n            });\n          }\n\n          // Image Issues\n          notebookIssues.push(\n            ...(await detectImageIssuesInCell(\n              rawMarkdown,\n              i,\n              cellType,\n              notebookPath,\n              baseUrl,\n              imageProcessor,\n              cell.attachments\n            ))\n          );\n\n          // Table Issues\n          notebookIssues.push(\n            ...detectTableIssuesInCell(rawMarkdown, i, cellType)\n          );\n\n          // Color Issues\n          notebookIssues.push(\n            ...(await detectColorIssuesInCell(\n              rawMarkdown,\n              i,\n              cellType,\n              notebookPath,\n              baseUrl,\n              imageProcessor,\n              cell.attachments\n            ))\n          );\n\n          // Link Issues\n          notebookIssues.push(\n            ...detectLinkIssuesInCell(rawMarkdown, i, cellType)\n          );\n        }\n      } else if (cellType === 'code') {\n        // Code cell analysis not implemented yet\n      }\n    }\n  } finally {\n    tempDiv.remove();\n  }\n\n  return notebookIssues;\n}\n\n// Analyze a single cell (content-based categories only). Headings are excluded\n// because heading structure depends on the entire notebook.\nexport async function analyzeCellIssues(\n  cell: IGeneralCell,\n  documentContext: Document,\n  baseUrl: string,\n  imageProcessor: IImageProcessor,\n  notebookPath: string = ''\n): Promise<ICellIssue[]> {\n  const issues: ICellIssue[] = [];\n\n  const cellType = cell.type;\n  if (cellType !== 'markdown') {\n    return issues;\n  }\n\n  const rawMarkdown = cell.source;\n  if (!rawMarkdown.trim()) {\n    return issues;\n  }\n\n  // Images\n  issues.push(\n    ...(await detectImageIssuesInCell(\n      rawMarkdown,\n      cell.cellIndex,\n      cellType,\n      notebookPath,\n      baseUrl,\n      imageProcessor,\n      cell.attachments\n    ))\n  );\n\n  // Tables\n  issues.push(\n    ...detectTableIssuesInCell(rawMarkdown, cell.cellIndex, cellType)\n  );\n\n  // Color\n  issues.push(\n    ...(await detectColorIssuesInCell(\n      rawMarkdown,\n      cell.cellIndex,\n      cellType,\n      notebookPath,\n      baseUrl,\n      imageProcessor,\n      cell.attachments\n    ))\n  );\n\n  // Links\n  issues.push(...detectLinkIssuesInCell(rawMarkdown, cell.cellIndex, cellType));\n\n  return issues;\n}\n\n/**\n * CLI-specific analysis function.\n * Excludes: axe-core (requires DOM)\n */\nexport async function analyzeCellsAccessibilityCLI(\n  cells: IGeneralCell[],\n  imageProcessor: IImageProcessor\n): Promise<ICellIssue[]> {\n  const notebookIssues: ICellIssue[] = [];\n\n  // 1. Heading One Check\n  notebookIssues.push(\n    ...(await detectHeadingOneIssue('', 0, 'markdown', cells))\n  );\n\n  // 2. Heading Hierarchy\n  const headingIssues = await analyzeHeadingHierarchy(cells);\n  notebookIssues.push(...headingIssues);\n\n  // 3. Per-cell checks\n  for (let i = 0; i < cells.length; i++) {\n    const cell = cells[i];\n    if (cell.type === 'markdown' && cell.source.trim()) {\n      const rawMarkdown = cell.source;\n\n      // Image Issues\n      notebookIssues.push(\n        ...(await detectImageIssuesInCell(\n          rawMarkdown,\n          i,\n          cell.type,\n          '', // notebookPath\n          '', // baseUrl\n          imageProcessor,\n          cell.attachments\n        ))\n      );\n\n      // Table Issues\n      notebookIssues.push(\n        ...detectTableIssuesInCell(rawMarkdown, i, cell.type)\n      );\n\n      // Color Issues\n      /*\n      notebookIssues.push(\n        ...(await detectColorIssuesInCell(\n          rawMarkdown,\n          i,\n          cell.type,\n          '', // notebookPath\n          '', // baseUrl\n          imageProcessor,\n          cell.attachments\n        ))\n      );\n      */\n\n      // Link Issues\n      notebookIssues.push(...detectLinkIssuesInCell(rawMarkdown, i, cell.type));\n    }\n  }\n\n  return notebookIssues;\n}\n","import Tesseract, { PSM } from 'tesseract.js';\nimport { IGeneralCell, ICellIssue, IImageProcessor } from '../../types.js';\n\nfunction hexToRgb(hex: string): { r: number; g: number; b: number } {\n  const r = parseInt(hex.slice(1, 3), 16);\n  const g = parseInt(hex.slice(3, 5), 16);\n  const b = parseInt(hex.slice(5, 7), 16);\n  return { r, g, b };\n}\n\nfunction calculateLuminance(rgb: { r: number; g: number; b: number }): number {\n  const a = [rgb.r, rgb.g, rgb.b].map(v => {\n    v /= 255;\n    return v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\n  });\n  return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;\n}\n\nfunction calculateContrast(\n  foregroundHex: string,\n  backgroundHex: string\n): number {\n  const rgb1 = hexToRgb(foregroundHex);\n  const rgb2 = hexToRgb(backgroundHex);\n  const L1 = calculateLuminance(rgb1);\n  const L2 = calculateLuminance(rgb2);\n  const lighter = Math.max(L1, L2);\n  const darker = Math.min(L1, L2);\n  return (lighter + 0.05) / (darker + 0.05);\n}\n\nasync function getColorContrastInImage(\n  imagePath: string,\n  currentDirectoryPath: string,\n  baseUrl: string,\n  imageProcessor: IImageProcessor,\n  attachments?: IGeneralCell['attachments']\n): Promise<{ contrast: number; isAccessible: boolean; hasLargeText: boolean }> {\n  // Determine the source for the image\n  let imageSource: string;\n\n  // Check if this is a JupyterLab attachment\n  if (imagePath.startsWith('attachment:')) {\n    if (!attachments) {\n      throw new Error('Attachments required for attachment images');\n    }\n    const attachmentId = imagePath.substring('attachment:'.length);\n    const data = attachments[attachmentId];\n    let dataUrl: string | null = null;\n\n    if (data) {\n      for (const mimetype in data) {\n        if (mimetype.startsWith('image/')) {\n          const base64 = data[mimetype];\n          if (typeof base64 === 'string') {\n            dataUrl = `data:${mimetype};base64,${base64}`;\n            break;\n          }\n        }\n      }\n    }\n\n    if (!dataUrl) {\n      throw new Error(`Could not load attachment: ${attachmentId}`);\n    }\n    imageSource = dataUrl;\n  } else {\n    // Regular image path (local or remote)\n    imageSource = imagePath.startsWith('http')\n      ? imagePath\n      : `${baseUrl}files/${currentDirectoryPath}/${imagePath}`;\n  }\n\n  // Create canvas and load image\n  const img = await imageProcessor.loadImage(imageSource);\n\n  return new Promise((resolve, reject) => {\n    (async () => {\n      try {\n        const canvas = imageProcessor.createCanvas(img.width, img.height);\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n          reject(new Error('Could not get canvas context'));\n          return;\n        }\n\n        // Draw image\n        ctx.drawImage(img, 0, 0);\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n        try {\n          // Create Tesseract worker\n          const worker = await Tesseract.createWorker();\n\n          // Set PSM mode to SPARSE_TEXT (11)\n          await worker.setParameters({\n            tessedit_pageseg_mode: PSM.SPARSE_TEXT\n          });\n\n          // Recognize text blocks with PSM 11\n          const result = await worker.recognize(canvas, {}, { blocks: true });\n          if (result.data.confidence < 40) {\n            // We can't analyze the image, so we return the default values\n            resolve({\n              contrast: 21,\n              isAccessible: true,\n              hasLargeText: false\n            });\n            return;\n          }\n\n          let minContrast = 21; // Default to maximum contrast\n          let hasLargeText = false;\n\n          // Process each text block\n          if (result.data.blocks && result.data.blocks.length > 0) {\n            result.data.blocks.forEach(block => {\n              const { x0, y0, x1, y1 } = block.bbox;\n              const textHeight = y1 - y0;\n\n              // Check if text is large (>= 24px height)\n              if (textHeight >= 24) {\n                hasLargeText = true;\n              }\n\n              // Get colors from the block area\n              const colorCount: { [key: string]: number } = {};\n              const data = imageData.data;\n              const width = imageData.width;\n\n              // Sample colors from the block area\n              for (let y = y0; y <= y1; y++) {\n                for (let x = x0; x <= x1; x++) {\n                  const index = (y * width + x) * 4;\n                  const r = data[index];\n                  const g = data[index + 1];\n                  const b = data[index + 2];\n\n                  // Skip transparent pixels\n                  if (data[index + 3] < 128) {\n                    continue;\n                  }\n\n                  // Quantize colors to reduce unique values\n                  const scale = 30;\n                  const colorKey =\n                    '#' +\n                    (\n                      (1 << 24) +\n                      ((Math.floor(r / scale) * scale) << 16) +\n                      ((Math.floor(g / scale) * scale) << 8) +\n                      Math.floor(b / scale) * scale\n                    )\n                      .toString(16)\n                      .slice(1)\n                      .toUpperCase();\n\n                  colorCount[colorKey] = (colorCount[colorKey] || 0) + 1;\n                }\n              }\n\n              // Get the two most common colors\n              const sortedColors = Object.entries(colorCount).sort(\n                (a, b) => b[1] - a[1]\n              );\n              if (sortedColors.length >= 2) {\n                const bgColor = sortedColors[0][0];\n                const fgColor = sortedColors[1][0];\n\n                // Calculate contrast ratio\n                const contrast = calculateContrast(fgColor, bgColor);\n\n                // Update minimum contrast\n                if (contrast < minContrast) {\n                  minContrast = contrast;\n                }\n              }\n            });\n          }\n\n          // Determine if the contrast meets WCAG standards (4.5:1 for normal text)\n          const isAccessible = hasLargeText\n            ? minContrast >= 3\n            : minContrast >= 4.5;\n\n          // Terminate the worker\n          await worker.terminate();\n\n          resolve({\n            contrast: minContrast,\n            isAccessible,\n            hasLargeText\n          });\n        } catch (error) {\n          console.error('Error analyzing image with Tesseract:', error);\n          // Fallback to analyzing the entire image\n          const colorCount: { [key: string]: number } = {};\n          const data = imageData.data;\n          const width = imageData.width;\n          const height = imageData.height;\n\n          // Sample colors from the image (every 10th pixel to improve performance)\n          for (let y = 0; y < height; y += 10) {\n            for (let x = 0; x < width; x += 10) {\n              const index = (y * width + x) * 4;\n              const r = data[index];\n              const g = data[index + 1];\n              const b = data[index + 2];\n\n              // Skip transparent pixels\n              if (data[index + 3] < 128) {\n                continue;\n              }\n\n              // Quantize colors to reduce unique values\n              const scale = 30;\n              const colorKey =\n                '#' +\n                (\n                  (1 << 24) +\n                  ((Math.floor(r / scale) * scale) << 16) +\n                  ((Math.floor(g / scale) * scale) << 8) +\n                  Math.floor(b / scale) * scale\n                )\n                  .toString(16)\n                  .slice(1)\n                  .toUpperCase();\n\n              colorCount[colorKey] = (colorCount[colorKey] || 0) + 1;\n            }\n          }\n\n          // Get the two most common colors\n          const sortedColors = Object.entries(colorCount).sort(\n            (a, b) => b[1] - a[1]\n          );\n          let contrast = 21; // Default to maximum contrast\n\n          if (sortedColors.length >= 2) {\n            const bgColor = sortedColors[0][0];\n            const fgColor = sortedColors[1][0];\n\n            // Calculate contrast ratio\n            contrast = calculateContrast(fgColor, bgColor);\n          }\n\n          // Determine if the contrast meets WCAG standards (4.5:1 for normal text)\n          const isAccessible = contrast >= 4.5;\n\n          resolve({\n            contrast,\n            isAccessible,\n            hasLargeText: false // Default to false in fallback case\n          });\n        }\n      } catch (error) {\n        console.error('Error processing image data:', error);\n        reject(error);\n      }\n    })().catch(reject);\n  });\n}\n\nexport async function detectColorIssuesInCell(\n  rawMarkdown: string,\n  cellIndex: number,\n  cellType: string,\n  notebookPath: string,\n  baseUrl: string,\n  imageProcessor: IImageProcessor,\n  attachments?: IGeneralCell['attachments']\n): Promise<ICellIssue[]> {\n  const notebookIssues: ICellIssue[] = [];\n\n  // Check for all images in markdown syntax (this will also catch attachment syntax)\n  const mdSyntaxImageRegex = /!\\[[^\\]]*\\]\\([^)]+\\)/g;\n\n  // Check for all images in HTML syntax\n  const htmlSyntaxImageRegex = /<img[^>]*>(?:<\\/img>)?/g;\n\n  let match;\n  while (\n    (match = mdSyntaxImageRegex.exec(rawMarkdown)) !== null ||\n    (match = htmlSyntaxImageRegex.exec(rawMarkdown)) !== null\n  ) {\n    const imageUrl =\n      match[0].match(/\\(([^)]+)\\)/)?.[1] ||\n      match[0].match(/src=\"([^\"]+)\"/)?.[1];\n\n    if (imageUrl) {\n      const suggestedFix: string = '';\n      try {\n        // getColorContrastInImage will handle both regular images and attachments\n        const { contrast, isAccessible, hasLargeText } =\n          await getColorContrastInImage(\n            imageUrl,\n            notebookPath,\n            baseUrl,\n            imageProcessor,\n            attachments\n          );\n        if (!isAccessible) {\n          if (hasLargeText) {\n            notebookIssues.push({\n              cellIndex,\n              cellType: cellType as 'code' | 'markdown',\n              violationId: 'color-insufficient-cc-large',\n              customDescription: `Ensure that a text in an image has sufficient color contrast. The text contrast ratio is ${contrast.toFixed(2)}:1, which is below the required ${hasLargeText ? '3:1' : '4.5:1'} ratio for ${hasLargeText ? 'large' : 'normal'} text.`,\n              issueContentRaw: match[0],\n              metadata: {\n                offsetStart: match.index ?? 0,\n                offsetEnd: (match.index ?? 0) + match[0].length\n              },\n              suggestedFix: suggestedFix\n            });\n          } else {\n            notebookIssues.push({\n              cellIndex,\n              cellType: cellType as 'code' | 'markdown',\n              violationId: 'color-insufficient-cc-normal',\n              customDescription: `Ensure that a large text in an image has sufficient color contrast. The text contrast ratio is ${contrast.toFixed(2)}:1, which is below the required ${hasLargeText ? '3:1' : '4.5:1'} ratio for ${hasLargeText ? 'large' : 'normal'} text.`,\n              issueContentRaw: match[0],\n              metadata: {\n                offsetStart: match.index ?? 0,\n                offsetEnd: (match.index ?? 0) + match[0].length\n              },\n              suggestedFix: suggestedFix\n            });\n          }\n        }\n      } catch (error) {\n        console.error(`Failed to process image ${imageUrl}:`, error);\n      }\n    }\n  }\n  return notebookIssues;\n}\n","import { marked } from 'marked';\nimport { IGeneralCell, ICellIssue } from '../../types.js';\n\nexport async function detectHeadingOneIssue(\n  rawMarkdown: string,\n  cellIndex: number,\n  cellType: string,\n  cells: IGeneralCell[]\n): Promise<ICellIssue[]> {\n  const notebookIssues: ICellIssue[] = [];\n\n  // If there are no cells, nothing to report\n  if (!cells.length) {\n    return notebookIssues;\n  }\n\n  // Check if the first cell begins with an H1 (the only case where we do NOT flag)\n  const firstCell = cells[0];\n  let firstCellStartsWithH1 = false;\n  if (firstCell.type === 'markdown') {\n    const content = firstCell.source;\n    const tokens: any[] = marked.lexer(content) as any[];\n    const firstToken: any = tokens.find(\n      (t: any) => t && t.type !== 'space' && (t.raw || '').trim().length > 0\n    );\n    if (firstToken && firstToken.type === 'heading' && firstToken.depth === 1) {\n      firstCellStartsWithH1 = true;\n    } else if (firstToken && firstToken.type === 'html') {\n      const rawHtml = firstToken.raw || '';\n      firstCellStartsWithH1 = /<h1[^>]*>[\\s\\S]*?<\\/h1>/i.test(rawHtml);\n    }\n  }\n\n  if (firstCellStartsWithH1) {\n    return notebookIssues;\n  }\n\n  // Emit a single top-level issue at the beginning and return\n  notebookIssues.push({\n    cellIndex: 0,\n    cellType: firstCell.type as 'markdown' | 'code',\n    violationId: 'heading-missing-h1',\n    issueContentRaw: ''\n  });\n\n  return notebookIssues;\n}\n\nexport async function analyzeHeadingHierarchy(\n  cells: IGeneralCell[]\n): Promise<ICellIssue[]> {\n  const notebookIssues: ICellIssue[] = [];\n\n  try {\n    // Create a complete heading structure that maps cell index to heading level and content\n    // Use array to retain order of headings\n    const headingStructure: Array<{\n      cellIndex: number;\n      level: number;\n      content: string;\n      html: string;\n    }> = [];\n\n    // First pass: collect all headings\n    for (let i = 0; i < cells.length; i++) {\n      const cell = cells[i];\n      if (!cell || cell.type !== 'markdown') {\n        continue;\n      }\n\n      const content = cell.source;\n      if (!content.trim()) {\n        continue;\n      }\n\n      // Tokenize markdown and map tokens to source offsets for headings\n      const tokens: any[] = marked.lexer(content) as any[];\n      let searchStart = 0;\n      for (const token of tokens) {\n        let level: number | null = null;\n        let rawHeading = '';\n        let text = '';\n\n        if ((token as any).type === 'heading') {\n          level = (token as any).depth;\n          rawHeading = (token as any).raw || '';\n          text = (token as any).text || '';\n        } else if ((token as any).type === 'html') {\n          const rawHtml = (token as any).raw || '';\n          const m = rawHtml.match(/<h([1-6])[^>]*>[\\s\\S]*?<\\/h\\1>/i);\n          if (m) {\n            level = parseInt(m[1], 10);\n            rawHeading = m[0];\n            text = rawHeading.replace(/<[^>]+>/g, '');\n          }\n        }\n\n        if (level !== null) {\n          // Bug Check: Is the rendered h1 really h1? (Markdown Setext-heading) -> Can be improved.\n          if (\n            level === 1 &&\n            ((text || '').match(/(?<!\\\\)\\$\\$/g) || []).length === 1\n          ) {\n            continue;\n          }\n\n          const start = content.indexOf(rawHeading, searchStart);\n          if (start === -1) {\n            continue;\n          }\n          const end = start + rawHeading.length;\n          searchStart = end;\n\n          headingStructure.push({\n            cellIndex: i,\n            level,\n            content: text,\n            html: rawHeading,\n            offsetStart: start,\n            offsetEnd: end\n          } as any);\n        }\n      }\n    }\n\n    // Track headings by level to detect duplicates\n    // Only track h1 and h2 headings\n    const h1Headings = new Map<string, number[]>();\n    const h2Headings = new Map<string, number[]>();\n\n    // First pass: collect all h1 and h2 headings\n    headingStructure.forEach((heading, index) => {\n      if (heading.level === 1) {\n        const normalizedContent = heading.content.trim().toLowerCase();\n        if (!h1Headings.has(normalizedContent)) {\n          h1Headings.set(normalizedContent, []);\n        }\n        h1Headings.get(normalizedContent)!.push(index);\n      } else if (heading.level === 2) {\n        const normalizedContent = heading.content.trim().toLowerCase();\n        if (!h2Headings.has(normalizedContent)) {\n          h2Headings.set(normalizedContent, []);\n        }\n        h2Headings.get(normalizedContent)!.push(index);\n      }\n    });\n\n    // Check for multiple h1 headings\n    // First, find all h1 headings regardless of content\n    const allH1Indices = headingStructure\n      .map((heading, index) => (heading.level === 1 ? index : -1))\n      .filter(index => index !== -1);\n\n    // If there are multiple h1 headings, flag all but the first one\n    if (allH1Indices.length > 1) {\n      allH1Indices.slice(1).forEach(index => {\n        const heading = headingStructure[index];\n        notebookIssues.push({\n          cellIndex: heading.cellIndex,\n          cellType: 'markdown',\n          violationId: 'heading-multiple-h1',\n          issueContentRaw: heading.html,\n          metadata: {\n            headingStructure: headingStructure.filter(\n              h => h.level === 1 || h.level === 2\n            ),\n            offsetStart: (heading as any).offsetStart,\n            offsetEnd: (heading as any).offsetEnd\n          }\n        });\n      });\n    }\n\n    // Check for duplicate h2 headings\n    h2Headings.forEach((indices, content) => {\n      if (indices.length > 1) {\n        // Flag all h2 headings after the first one\n        indices.slice(1).forEach(index => {\n          const heading = headingStructure[index];\n          notebookIssues.push({\n            cellIndex: heading.cellIndex,\n            cellType: 'markdown',\n            violationId: 'heading-duplicate-h2',\n            issueContentRaw: heading.html,\n            metadata: {\n              headingStructure: headingStructure.filter(\n                h => h.level === 1 || h.level === 2\n              ),\n              offsetStart: (heading as any).offsetStart,\n              offsetEnd: (heading as any).offsetEnd\n            }\n          });\n        });\n      }\n    });\n\n    // Check for headings that appear in both h1 and h2\n    h1Headings.forEach((h1Indices, content) => {\n      if (h2Headings.has(content)) {\n        // Flag all h2 headings that share content with h1\n        h2Headings.get(content)!.forEach(index => {\n          const heading = headingStructure[index];\n          notebookIssues.push({\n            cellIndex: heading.cellIndex,\n            cellType: 'markdown',\n            violationId: 'heading-duplicate-h1-h2',\n            issueContentRaw: heading.html,\n            metadata: {\n              headingStructure: headingStructure.filter(\n                h => h.level === 1 || h.level === 2\n              ),\n              offsetStart: (heading as any).offsetStart,\n              offsetEnd: (heading as any).offsetEnd\n            }\n          });\n        });\n      }\n    });\n\n    // Second pass: analyze heading structure for other issues\n    for (let i = 0; i < headingStructure.length; i++) {\n      const current = headingStructure[i];\n      const previous = i > 0 ? headingStructure[i - 1] : null;\n\n      // Check for empty headings\n      if (!current.content.trim()) {\n        notebookIssues.push({\n          cellIndex: current.cellIndex,\n          cellType: 'markdown',\n          violationId: 'heading-empty',\n          issueContentRaw: current.html,\n          metadata: {\n            offsetStart: (current as any).offsetStart,\n            offsetEnd: (current as any).offsetEnd\n          }\n        });\n      }\n\n      // Skip first heading (no previous to compare with)\n      if (!previous) {\n        continue;\n      }\n\n      // Check for invalid heading level skips\n      // Only flag violations when skipping to lower levels (e.g., h2 to h4)\n      // Allow skips when returning to higher levels (e.g., h4 to h2)\n      const levelDiff = current.level - previous.level;\n      if (levelDiff > 1) {\n        // Only check when going to lower levels\n        notebookIssues.push({\n          cellIndex: current.cellIndex,\n          cellType: 'markdown',\n          violationId: 'heading-wrong-order',\n          issueContentRaw: current.html,\n          metadata: {\n            previousHeadingLevel: previous.level,\n            offsetStart: (current as any).offsetStart,\n            offsetEnd: (current as any).offsetEnd\n          }\n        });\n      }\n    }\n  } catch (error) {\n    console.error('Error in heading hierarchy analysis:', error);\n  }\n\n  return notebookIssues;\n}\n","import Tesseract from 'tesseract.js';\nimport { ICellIssue, IImageProcessor, IGeneralCell } from '../../types.js';\n\nasync function getTextInImage(\n  imagePath: string,\n  currentDirectoryPath: string,\n  baseUrl: string,\n  imageProcessor: IImageProcessor,\n  attachments?: IGeneralCell['attachments']\n): Promise<{ text: string; confidence: number }> {\n  const worker = await Tesseract.createWorker('eng');\n  try {\n    let imageSource: string;\n\n    // Check if this is a JupyterLab attachment\n    if (imagePath.startsWith('attachment:')) {\n      if (!attachments) {\n        throw new Error('Attachments required for attachment images');\n      }\n      const attachmentId = imagePath.substring('attachment:'.length);\n      const data = attachments[attachmentId];\n      let dataUrl: string | null = null;\n\n      if (data) {\n        for (const mimetype in data) {\n          if (mimetype.startsWith('image/')) {\n            const base64 = data[mimetype];\n            if (typeof base64 === 'string') {\n              dataUrl = `data:${mimetype};base64,${base64}`;\n              break;\n            }\n          }\n        }\n      }\n\n      if (!dataUrl) {\n        throw new Error(`Could not load attachment: ${attachmentId}`);\n      }\n      imageSource = dataUrl;\n    } else {\n      imageSource = imagePath.startsWith('http')\n        ? imagePath\n        : baseUrl\n          ? `${baseUrl}files/${currentDirectoryPath}/${imagePath}`\n          : `${currentDirectoryPath}/${imagePath}`; // Simple join for CLI\n    }\n\n    // Load image using the processor (handles Browser vs Node differences)\n    const img = await imageProcessor.loadImage(imageSource);\n\n    const {\n      data: { text, confidence }\n    } = await worker.recognize(img);\n\n    if (!text) {\n      throw new Error('No text found in the image');\n    }\n    return { text, confidence };\n  } finally {\n    await worker.terminate();\n  }\n}\n\nexport async function detectImageIssuesInCell(\n  rawMarkdown: string,\n  cellIndex: number,\n  cellType: string,\n  notebookPath: string,\n  baseUrl: string,\n  imageProcessor: IImageProcessor,\n  attachments?: IGeneralCell['attachments']\n): Promise<ICellIssue[]> {\n  const notebookIssues: ICellIssue[] = [];\n\n  // Check for images without alt text in markdown syntax\n  const mdSyntaxMissingAltRegex = /!\\[\\]\\([^)]+\\)/g;\n\n  // Check for images without alt tag or empty alt tag in HTML syntax\n  const htmlSyntaxMissingAltRegex = /<img[^>]*alt=[\"']\\s*[\"'][^>]*\\/?>/g;\n  const htmlSyntaxNoAltRegex = /<img(?![^>]*alt=)[^>]*\\/?>/g;\n  // Iterate a list of regexes; each scans independently over the cell content\n  const regexes = [\n    mdSyntaxMissingAltRegex,\n    htmlSyntaxMissingAltRegex,\n    htmlSyntaxNoAltRegex\n  ];\n\n  for (const regex of regexes) {\n    regex.lastIndex = 0;\n    let match: RegExpExecArray | null;\n    while ((match = regex.exec(rawMarkdown)) !== null) {\n      const imageUrl =\n        match[0].match(/\\(([^)]+)\\)/)?.[1] ||\n        match[0].match(/src=[\"']([^\"']+)[\"']/)?.[1];\n      if (!imageUrl) {\n        continue;\n      }\n\n      const issueId = 'image-missing-alt';\n      const start = match.index ?? 0;\n      const end = start + match[0].length;\n\n      let suggestedFix: string = '';\n      try {\n        // Only run OCR if baseUrl is provided (Extension mode)\n        // In CLI mode (baseUrl is empty), we skip OCR to avoid Tesseract/Canvas issues\n        if (baseUrl) {\n          const ocrResult = await getTextInImage(\n            imageUrl,\n            notebookPath,\n            baseUrl,\n            imageProcessor,\n            attachments\n          );\n          if (ocrResult.confidence > 40) {\n            suggestedFix = ocrResult.text;\n          }\n        }\n      } catch (error) {\n        console.error(`Failed to process image ${imageUrl}:`, error);\n      } finally {\n        notebookIssues.push({\n          cellIndex,\n          cellType: cellType as 'code' | 'markdown',\n          violationId: issueId,\n          issueContentRaw: match[0],\n          suggestedFix: suggestedFix,\n          metadata: {\n            issueId: `cell-${cellIndex}-${issueId}-o${start}-${end}`,\n            offsetStart: start,\n            offsetEnd: end\n          }\n        });\n      }\n    }\n  }\n  return notebookIssues;\n}\n","export * from './image.js';\nexport * from './table.js';\nexport * from './heading.js';\nexport * from './color.js';\nexport * from './link.js';\n","import { ICellIssue } from '../../types.js';\n\nconst VAGUE_PHRASES = ['click', 'here', 'link', 'more', 'read'];\nconst MIN_DESCRIPTIVE_CHARS = 20;\n\nfunction isUrlLike(text: string): boolean {\n  const t = text.trim();\n  return /^(https?:\\/\\/|www\\.)/i.test(t);\n}\n\nfunction containsVaguePhrase(text: string): boolean {\n  const lower = text.toLowerCase();\n  return VAGUE_PHRASES.some(p => lower.includes(p));\n}\n\nfunction extractAttr(tag: string, attr: string): string | null {\n  // Match attr='...' or attr=\"...\"\n  const m = new RegExp(attr + '=[\\'\"][^\\'\"]+[\\'\"]', 'i').exec(tag);\n  return m\n    ? m[0].split('=')[1].replace(/^['\"]/, '').replace(/['\"]$/, '')\n    : null;\n}\n\nexport function detectLinkIssuesInCell(\n  rawMarkdown: string,\n  cellIndex: number,\n  cellType: string\n): ICellIssue[] {\n  const issues: ICellIssue[] = [];\n\n  // Markdown links: [text](url)\n  const mdLink = /\\[([^\\]]+)\\]\\(([^)\\s]+)[^)]*\\)/g;\n  let match: RegExpExecArray | null;\n  while ((match = mdLink.exec(rawMarkdown)) !== null) {\n    const full = match[0];\n    const text = (match[1] || '').trim();\n    const start = match.index ?? 0;\n    const end = start + full.length;\n    const violation = shouldFlag(text);\n    if (violation) {\n      issues.push({\n        cellIndex,\n        cellType: cellType as 'code' | 'markdown',\n        violationId: 'link-discernible-text',\n        issueContentRaw: full,\n        metadata: {\n          issueId: `cell-${cellIndex}-link-discernible-text-o${start}-${end}`,\n          offsetStart: start,\n          offsetEnd: end\n        }\n      });\n    }\n  }\n\n  // HTML links: <a ...>text</a>\n  const htmlLink = /<a\\b[^>]*>\\s*([\\s\\S]*?)\\s*<\\/a>/gi;\n  while ((match = htmlLink.exec(rawMarkdown)) !== null) {\n    const full = match[0];\n    const inner = (match[1] || '').replace(/<[^>]*>/g, '').trim();\n    const tagStart = match.index ?? 0;\n    const tagEnd = tagStart + full.length;\n\n    // Use aria-label if provided\n    const openingTagMatch = /<a\\b[^>]*>/i.exec(full);\n    const openingTag = openingTagMatch ? openingTagMatch[0] : '';\n    const aria = extractAttr(openingTag, 'aria-label');\n    const label = aria && aria.trim() ? aria.trim() : inner;\n\n    // Explicitly flag anchors with no discernible text and no aria-label\n    const hasAria = !!(aria && aria.trim());\n    const hasInnerText = inner.length > 0;\n    if (!hasAria && !hasInnerText) {\n      issues.push({\n        cellIndex,\n        cellType: cellType as 'code' | 'markdown',\n        violationId: 'link-discernible-text',\n        issueContentRaw: full,\n        metadata: {\n          issueId: `cell-${cellIndex}-link-discernible-text-o${tagStart}-${tagEnd}`,\n          offsetStart: tagStart,\n          offsetEnd: tagEnd\n        }\n      });\n      continue;\n    }\n\n    const violation = shouldFlag(label);\n    if (violation) {\n      issues.push({\n        cellIndex,\n        cellType: cellType as 'code' | 'markdown',\n        violationId: 'link-discernible-text',\n        issueContentRaw: full,\n        metadata: {\n          issueId: `cell-${cellIndex}-link-discernible-text-o${tagStart}-${tagEnd}`,\n          offsetStart: tagStart,\n          offsetEnd: tagEnd\n        }\n      });\n    }\n  }\n\n  return issues;\n}\n\nfunction shouldFlag(text: string): boolean {\n  // Flag if entire text is a URL\n  if (isUrlLike(text)) {\n    return true;\n  }\n  // AND condition: vague phrase present AND too short\n  const tooShort = text.trim().length < MIN_DESCRIPTIVE_CHARS;\n  const hasVague = containsVaguePhrase(text);\n  return hasVague && tooShort;\n}\n","import { IGeneralCell, ICellIssue } from '../../types.js';\n\nexport function detectTableIssuesInCell(\n  rawMarkdown: string,\n  cellIndex: number,\n  cellType: string\n): ICellIssue[] {\n  const notebookIssues: ICellIssue[] = [];\n\n  // Check for tables without th tags\n  const tableWithoutThRegex =\n    /<table[^>]*>(?![\\s\\S]*?<th[^>]*>)[\\s\\S]*?<\\/table>/gi;\n  let match;\n  while ((match = tableWithoutThRegex.exec(rawMarkdown)) !== null) {\n    const start = match.index ?? 0;\n    const end = start + match[0].length;\n    notebookIssues.push({\n      cellIndex,\n      cellType: cellType as 'code' | 'markdown',\n      violationId: 'table-missing-header',\n      issueContentRaw: match[0],\n      metadata: {\n        offsetStart: start,\n        offsetEnd: end\n      }\n    });\n  }\n\n  // Check for tables without caption tags\n  const tableWithoutCaptionRegex =\n    /<table[^>]*>(?![\\s\\S]*?<caption[^>]*>)[\\s\\S]*?<\\/table>/gi;\n  while ((match = tableWithoutCaptionRegex.exec(rawMarkdown)) !== null) {\n    const start = match.index ?? 0;\n    const end = start + match[0].length;\n    notebookIssues.push({\n      cellIndex,\n      cellType: cellType as 'code' | 'markdown',\n      violationId: 'table-missing-caption',\n      issueContentRaw: match[0],\n      metadata: {\n        offsetStart: start,\n        offsetEnd: end\n      }\n    });\n  }\n\n  // Check for tables with th tags but missing scope attributes\n  // Use regex instead of DOMParser for CLI compatibility\n  const tableWithThRegex = /<table[^>]*>[\\s\\S]*?<\\/table>/gi;\n  while ((match = tableWithThRegex.exec(rawMarkdown)) !== null) {\n    const tableHtml = match[0];\n    const start = match.index ?? 0;\n    const end = start + match[0].length;\n\n    // Find all th tags within this table\n    const thRegex = /<th\\b([^>]*)>/gi;\n    let thMatch;\n    let hasMissingScope = false;\n\n    while ((thMatch = thRegex.exec(tableHtml)) !== null) {\n      const attributes = thMatch[1];\n      if (!attributes.toLowerCase().includes('scope=')) {\n        hasMissingScope = true;\n        break; // Found one, flag the table\n      }\n    }\n\n    if (hasMissingScope) {\n      notebookIssues.push({\n        cellIndex,\n        cellType: cellType as 'code' | 'markdown',\n        violationId: 'table-missing-scope',\n        issueContentRaw: tableHtml,\n        metadata: {\n          offsetStart: start,\n          offsetEnd: end\n        }\n      });\n    }\n  }\n\n  return notebookIssues;\n}\n\nexport async function analyzeTableIssues(\n  cells: IGeneralCell[]\n): Promise<ICellIssue[]> {\n  const notebookIssues: ICellIssue[] = [];\n\n  for (let i = 0; i < cells.length; i++) {\n    const cell = cells[i];\n    if (!cell || cell.type !== 'markdown') {\n      continue;\n    }\n\n    const content = cell.source;\n    if (!content.trim()) {\n      continue;\n    }\n\n    const cellIssues = detectTableIssuesInCell(content, i, 'markdown');\n    notebookIssues.push(...cellIssues);\n  }\n\n  return notebookIssues;\n}\n","export * from \"./types.js\";\nexport * from \"./parsers.js\";\nexport * from \"./detection/base.js\";\nexport * from \"./utils/issueFormatter.js\";\nexport * from \"./utils/edit.js\";\nexport * from \"./utils/ai-utils.js\";\nexport * from \"./utils/metadata.js\";\nexport * from \"./detection/category/table.js\";\nexport * from \"./detection/category/heading.js\";\n// Export others if needed, using glob patterns or directories if possible, but specific files for now.\n","import { IGeneralCell } from './types.js';\n\n/**\n * Converts raw .ipynb JSON content into an environment-agnostic array of accessible cells.\n * This is for use in CLI or Node.js environments where JupyterLab widgets are not available.\n */\nexport function rawIpynbToGeneralCells(ipynbContent: any): IGeneralCell[] {\n  if (!ipynbContent || !Array.isArray(ipynbContent.cells)) {\n    console.warn('Invalid notebook content: \"cells\" array is missing.');\n    return [];\n  }\n\n  return ipynbContent.cells.map((cell: any, index: number) => {\n    // .ipynb source is usually an array of strings, but can be a string\n    let source = '';\n    if (Array.isArray(cell.source)) {\n      source = cell.source.join('');\n    } else if (typeof cell.source === 'string') {\n      source = cell.source;\n    }\n\n    // Normalize cell type\n    const type =\n      cell.cell_type === 'markdown' ||\n      cell.cell_type === 'code' ||\n      cell.cell_type === 'raw'\n        ? cell.cell_type\n        : 'raw'; // Fallback\n\n    return {\n      cellIndex: index,\n      type,\n      source,\n      attachments: cell.attachments\n    };\n  });\n}\n","export interface ICellIssue {\n  cellIndex: number;\n  cellType: 'markdown' | 'code';\n  violationId: string;\n  customDescription?: string;\n  customDetailedDescription?: string;\n  issueContentRaw: string;\n  metadata?: {\n    previousHeadingLevel?: number;\n    [key: string]: any;\n  };\n  suggestedFix?: string;\n}\n\nexport interface IGeneralCell {\n  cellIndex: number;\n  type: 'markdown' | 'code' | 'raw';\n  source: string;\n  attachments?: { [key: string]: { [mimeType: string]: string } };\n}\n\nexport interface IIssueInformation {\n  title: string;\n  description: string;\n  detailedDescription: string;\n  descriptionUrl?: string;\n}\n\nexport interface IImageProcessor {\n  loadImage(src: string): Promise<any>;\n  createCanvas(width: number, height: number): any;\n}\n","import { http } from './http.js';\nimport { ICellIssue } from '../types.js';\n\nexport interface IModelSettings {\n  baseUrl: string;\n  apiKey: string;\n  model: string;\n}\n\nasync function fetchImageAsBase64(imageUrl: string): Promise<string> {\n  /**\n   * Function that fetches image from url, converts to JPEG, and returns in base64 format.\n   * Similar to the Python convert_to_jpeg_base64 function in your notebook.\n   */\n\n  const response = await http.get(imageUrl, { responseType: 'blob' });\n  const imageBlob = response.data as Blob;\n\n  return new Promise<string>((resolve, reject) => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n\n    img.onload = () => {\n      // Create canvas and draw image\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n\n      if (!ctx) {\n        reject(new Error('Could not get canvas context'));\n        return;\n      }\n\n      // Set canvas size to image size\n      canvas.width = img.width;\n      canvas.height = img.height;\n\n      // If image has transparency, fill with white background first\n      ctx.fillStyle = 'white';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n      // Draw the image on canvas\n      ctx.drawImage(img, 0, 0);\n\n      // Convert to JPEG base64 (quality 95% like in the Python example)\n      const jpegDataUrl = canvas.toDataURL('image/jpeg', 0.95);\n\n      // Extract just the base64 part (remove \"data:image/jpeg;base64,\")\n      const base64String = jpegDataUrl.split(',')[1];\n      resolve(base64String);\n    };\n\n    img.onerror = () => {\n      reject(new Error('Failed to load image'));\n    };\n\n    // Create object URL from blob and load it\n    const objectUrl = URL.createObjectURL(imageBlob);\n    img.src = objectUrl;\n  });\n}\n\nexport async function getImageAltSuggestion(\n  issue: ICellIssue,\n  imageData: string,\n  visionSettings: IModelSettings\n): Promise<string> {\n  let prompt =\n    'Read the provided image and respond with a short description of the image, without any explanation. Avoid using the word \"image\" in the description.';\n  prompt += `Content: \\n${issue.issueContentRaw}\\n\\n`;\n\n  // New River implementation - using OpenAI Chat Completions API format\n  try {\n    const imageUrl = imageData.startsWith('data:image')\n      ? imageData\n      : `data:image/jpeg;base64,${await fetchImageAsBase64(imageData)}`;\n\n    const body = JSON.stringify({\n      model: visionSettings.model,\n      messages: [\n        {\n          role: 'system',\n          content:\n            'You are a helpful assistant that generates alt text for images.'\n        },\n        {\n          role: 'user',\n          content: [\n            {\n              type: 'text',\n              text: prompt\n            },\n            {\n              type: 'image_url',\n              image_url: {\n                url: imageUrl\n              }\n            }\n          ]\n        }\n      ],\n      max_tokens: 150\n    });\n\n    const response = await http.post(visionSettings.baseUrl, body, {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${visionSettings.apiKey}`\n      }\n    });\n\n    // Parse response using OpenAI Chat Completions format\n    if (\n      response.data.choices &&\n      response.data.choices[0] &&\n      response.data.choices[0].message\n    ) {\n      const responseText = response.data.choices[0].message.content;\n      return responseText ? responseText.trim() : 'No content in response';\n    } else {\n      console.error('Unexpected response structure:', response.data);\n      return 'Error parsing response';\n    }\n  } catch (error) {\n    console.error('Error getting suggestions:', error);\n    return 'Error';\n  }\n}\n\nexport async function getTableCaptionSuggestion(\n  issue: ICellIssue,\n  languageSettings: IModelSettings\n): Promise<string> {\n  const prompt = `Given this HTML table, please provide a caption for the table to be served as a title or heading for the table. Avoid using the word \"table\" in the caption. Here's the table:\n    ${issue.issueContentRaw}`;\n\n  // New River implementation - using OpenAI Chat Completions API format\n  try {\n    const body = JSON.stringify({\n      model: languageSettings.model,\n      messages: [\n        {\n          role: 'system',\n          content:\n            'You are a helpful assistant that generates captions for HTML tables.'\n        },\n        {\n          role: 'user',\n          content: prompt\n        }\n      ],\n      max_tokens: 150\n    });\n\n    const response = await http.post(languageSettings.baseUrl, body, {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${languageSettings.apiKey}`\n      }\n    });\n\n    // Parse response using OpenAI Chat Completions format\n    if (\n      response.data.choices &&\n      response.data.choices[0] &&\n      response.data.choices[0].message\n    ) {\n      const responseText = response.data.choices[0].message.content;\n      return responseText ? responseText.trim() : 'No content in response';\n    } else {\n      console.error('Unexpected response structure:', response.data);\n      return 'Error parsing response';\n    }\n  } catch (error) {\n    console.error('Error getting suggestions:', error);\n    return 'Error';\n  }\n}\n\nexport async function sendLLMRequest(\n  prompt: string,\n  settings: IModelSettings,\n  systemMessage: string = 'You are a helpful assistant.'\n): Promise<string> {\n  try {\n    const body = JSON.stringify({\n      model: settings.model,\n      messages: [\n        {\n          role: 'system',\n          content: systemMessage\n        },\n        {\n          role: 'user',\n          content: prompt\n        }\n      ],\n      max_tokens: 1500\n    });\n\n    const response = await http.post(settings.baseUrl, body, {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.apiKey}`\n      }\n    });\n\n    if (\n      response.data.choices &&\n      response.data.choices[0] &&\n      response.data.choices[0].message\n    ) {\n      const responseText = response.data.choices[0].message.content;\n      return responseText ? responseText.trim() : 'No content in response';\n    } else {\n      console.error('Unexpected response structure:', response.data);\n      return 'Error parsing response';\n    }\n  } catch (error) {\n    console.error('Error sending LLM request:', error);\n    return 'Error';\n  }\n}\n","import { ICellIssue } from '../types.js';\n\nexport interface IIssueOffsets {\n  offsetStart: number;\n  offsetEnd: number;\n}\n\nexport function getIssueOffsets(\n  issue: ICellIssue,\n  sourceLength: number\n): IIssueOffsets | null {\n  const start = (issue.metadata?.offsetStart as number | undefined) ?? null;\n  const end = (issue.metadata?.offsetEnd as number | undefined) ?? null;\n\n  if (\n    start === null ||\n    end === null ||\n    isNaN(start) ||\n    isNaN(end) ||\n    start < 0 ||\n    end > sourceLength ||\n    start >= end\n  ) {\n    return null;\n  }\n  return { offsetStart: start, offsetEnd: end };\n}\n\nexport function replaceSlice(\n  source: string,\n  start: number,\n  end: number,\n  replacement: string\n): string {\n  return source.slice(0, start) + replacement + source.slice(end);\n}\n","import axios, { AxiosRequestConfig, AxiosResponse } from 'axios';\n\ninterface IGuardedAxiosRequestConfig extends AxiosRequestConfig {\n  /** Optional byte limit for data: URLs. Defaults to 10 MiB. */\n  maxDataUrlBytes?: number;\n}\n\nfunction getDataUrlPayloadBytes(dataUrl: string): number {\n  // data:[<mediatype>][;base64],<data>\n  const commaIdx = dataUrl.indexOf(',');\n  if (commaIdx === -1) {\n    return 0;\n  }\n  const header = dataUrl.substring(0, commaIdx).toLowerCase();\n  const payload = dataUrl.substring(commaIdx + 1);\n\n  if (header.includes(';base64')) {\n    // Base64 size: 3/4 of length, minus padding\n    const len = payload.length;\n    const padding = payload.endsWith('==') ? 2 : payload.endsWith('=') ? 1 : 0;\n    return Math.floor((len * 3) / 4) - padding;\n  }\n\n  // URL-encoded payload; approximate by decoding length\n  try {\n    return decodeURIComponent(payload).length;\n  } catch {\n    return payload.length;\n  }\n}\n\nfunction enforceDataUrlLimit(\n  url?: string,\n  cfg?: IGuardedAxiosRequestConfig\n): void {\n  if (!url) {\n    return;\n  }\n  if (url.startsWith('data:')) {\n    const limit = cfg?.maxDataUrlBytes ?? 10 * 1024 * 1024; // 10 MiB default\n    const size = getDataUrlPayloadBytes(url);\n    if (size > limit) {\n      throw new Error(\n        `Data URL exceeds limit (${size} bytes > ${limit} bytes)`\n      );\n    }\n  }\n}\n\nexport async function get<T = any, R = AxiosResponse<T>>(\n  url: string,\n  config?: IGuardedAxiosRequestConfig\n): Promise<R> {\n  enforceDataUrlLimit(url, config);\n  return axios.get(url, config) as unknown as Promise<R>;\n}\n\nexport async function post<T = any, R = AxiosResponse<T>>(\n  url: string,\n  data?: any,\n  config?: IGuardedAxiosRequestConfig\n): Promise<R> {\n  enforceDataUrlLimit(url, config);\n  return axios.post(url, data, config) as unknown as Promise<R>;\n}\n\nexport const http = { get, post };\n\nexport type { IGuardedAxiosRequestConfig };\n","import { ICellIssue } from '../types.js';\n\nexport interface ILLMIssue {\n  violationId: string;\n  cellIndex: number;\n  cellType: 'markdown' | 'code';\n  description: string;\n  contentSnippet: string;\n}\n\nexport interface ILLMSummaryItem {\n  violationId: string;\n  count: number;\n}\n\nexport interface ILLMReport {\n  summary: {\n    totalIssues: number;\n    issuesByViolation: ILLMSummaryItem[];\n  };\n  issues: ILLMIssue[];\n}\n\nfunction normalizeContent(raw?: string): string {\n  if (!raw) {\n    return '';\n  }\n  const cleaned = raw.trim().replace(/\\s+/g, ' ');\n  return cleaned.substring(0, 160);\n}\n\nexport function buildLLMReport(issues: ICellIssue[]): ILLMReport {\n  const issuesByViolation: Record<string, number> = {};\n  const llmIssues: ILLMIssue[] = issues.map(issue => {\n    issuesByViolation[issue.violationId] =\n      (issuesByViolation[issue.violationId] || 0) + 1;\n    return {\n      violationId: issue.violationId,\n      cellIndex: issue.cellIndex,\n      cellType: issue.cellType,\n      description: issue.customDescription || '',\n      contentSnippet: normalizeContent(issue.issueContentRaw)\n    };\n  });\n\n  const summaryItems: ILLMSummaryItem[] = Object.entries(issuesByViolation).map(\n    ([violationId, count]) => ({ violationId, count })\n  );\n\n  return {\n    summary: {\n      totalIssues: issues.length,\n      issuesByViolation: summaryItems\n    },\n    issues: llmIssues\n  };\n}\n","import { IIssueInformation } from '../types.js';\n\nexport const issueCategoryNames = [\n  'Images',\n  'Headings',\n  'Lists',\n  'Tables',\n  'Color',\n  'Links',\n  'Other'\n];\n\nexport const issueToCategory = new Map<string, string>([\n  // 1. Images\n  ['image-missing-alt', 'Images'],\n\n  // TODO: 2. Headings\n  ['heading-missing-h1', 'Headings'],\n  ['heading-multiple-h1', 'Headings'],\n  ['heading-duplicate', 'Headings'],\n  ['heading-duplicate-h2', 'Headings'],\n  ['heading-duplicate-h1-h2', 'Headings'],\n  ['heading-wrong-order', 'Headings'],\n  ['heading-empty', 'Headings'],\n\n  // TODO: 3. Tables\n  ['table-missing-header', 'Tables'],\n  ['table-missing-caption', 'Tables'],\n  ['table-missing-scope', 'Tables'],\n\n  // TODO: 4. Color\n  ['color-insufficient-cc-normal', 'Color'],\n  ['color-insufficient-cc-large', 'Color'],\n  // TODO: Lists\n\n  // TODO: Links\n  ['link-discernible-text', 'Links']\n\n  // TODO: Other\n]);\n\nexport const issueToDescription = new Map<string, IIssueInformation>([\n  // 1. Images\n  [\n    'image-missing-alt',\n    {\n      title: 'Missing Alt Text',\n      description:\n        'All images must have alternate text to convey their purpose and meaning to screen reader users.',\n      detailedDescription:\n        \"Ensure all informative images have short, descriptive alternate text. Screen readers have no way of translating an image into words that gets read to the user, even if the image only consists of text. As a result, it's necessary for images to have short, descriptive alt text so screen reader users clearly understand the image's contents and purpose\",\n      descriptionUrl: 'https://dequeuniversity.com/rules/axe/4.4/image-alt'\n    }\n  ],\n\n  // TODO: 2. Headings\n  [\n    'heading-missing-h1',\n    {\n      title: 'Missing H1 Heading',\n      description:\n        'Ensure a single H1 tag is present at the top of the notebook.',\n      detailedDescription:\n        'Screen reader users can use keyboard shortcuts to navigate directly to the first h1, which, in principle, should allow them to jump directly to the main content of the web page. If there is no h1, or if the h1 appears somewhere other than at the start of the main content, screen reader users must listen to more of the web page to understand its structure, making the experience confusing and frustrating. Please also ensure that headings contain descriptive, accurate text',\n      descriptionUrl:\n        'https://dequeuniversity.com/rules/axe/4.1/page-has-heading-one'\n    }\n  ],\n  [\n    'heading-multiple-h1',\n    {\n      title: 'Duplicate H1 Heading',\n      description:\n        'Ensure there is only one level-one heading (h1) in the notebook.',\n      detailedDescription:\n        'The h1 heading should be at the top of the document and serve as the main title. Additional h1 headings can confuse screen reader users about the document structure. Please also ensure that headings contain descriptive, accurate text'\n    }\n  ],\n  [\n    'heading-duplicate-h2',\n    {\n      title: 'Duplicate Heading h2',\n      description: 'Ensure identical h2 headings are not used.',\n      detailedDescription:\n        'This can be confusing for screen reader users as it creates redundant landmarks in the document structure. Please consider combining the sections or using different heading text'\n    }\n  ],\n  [\n    'heading-duplicate-h1-h2',\n    {\n      title: 'Duplicate Heading h1 and h2',\n      description: 'Ensure h1 and h2 headings do not share the same text.',\n      detailedDescription:\n        'This can be confusing for screen reader users as it creates redundant landmarks in the document structure. Please use different text for h1 and h2 headings'\n    }\n  ],\n  [\n    'heading-wrong-order',\n    {\n      title: 'Wrong Heading Order',\n      description:\n        'Headings must be in a valid logical order, meaning H1 through H6 element tags must appear in a sequentially-descending order.',\n      detailedDescription:\n        'Ensure the order of headings is semantically correct. Headings provide essential structure for screen reader users to navigate a page. Skipping levels or using headings out of order can make the content feel disorganized or inaccessible. Please also ensure that headings contain descriptive, accurate text',\n      descriptionUrl:\n        'https://dequeuniversity.com/rules/axe/pdf/2.0/heading-order'\n    }\n  ],\n  [\n    'heading-empty',\n    {\n      title: 'Empty Heading',\n      description: 'Ensure that a heading element contains content.',\n      detailedDescription:\n        'Ensure headings have discernible text. Headings provide essential structure for screen reader users to navigate a page. When a heading is empty, it creates confusion and disrupts this experience. Please also ensure that headings contain descriptive, accurate text',\n      descriptionUrl: 'https://dequeuniversity.com/rules/axe/4.2/empty-heading'\n    }\n  ],\n\n  // TODO: 3. Tables\n  [\n    'table-missing-header',\n    {\n      title: 'Missing Table Header',\n      description: 'Ensure that a table has a row, column, or both headers.',\n      detailedDescription:\n        'Tables must have header cells to provide context for the data. Without headers, screen reader users cannot understand the relationship between data cells and their meaning. Please add appropriate header cells using the <th> tag'\n    }\n  ],\n  [\n    'table-missing-caption',\n    {\n      title: 'Missing Table Caption',\n      description: 'Ensure that a table has a caption.',\n      detailedDescription:\n        'Tables should have captions to provide a brief description of their content. Captions help screen reader users understand the purpose and context of the table data. Please add a caption using the <caption> tag'\n    }\n  ],\n  [\n    'table-missing-scope',\n    {\n      title: 'Missing Table Scope',\n      description: 'Ensure that a table has a scope attribute.',\n      detailedDescription: 'Table headers must have scope attributes'\n    }\n  ],\n\n  // TODO: 4. Color\n  [\n    'color-insufficient-cc-normal',\n    {\n      title: 'Insufficient Color Contrast',\n      description:\n        'Ensure that a text in an image has sufficient color contrast.',\n      detailedDescription:\n        'Text must have sufficient contrast with its background to be readable. For normal text, the contrast ratio should be at least 4.5:1. This ensures that users with visual impairments can read the content',\n      descriptionUrl: 'https://dequeuniversity.com/rules/axe/3.5/color-contrast'\n    }\n  ],\n  [\n    'color-insufficient-cc-large',\n    {\n      title: 'Insufficient Color Contrast',\n      description:\n        'Ensure that a large text in an image has sufficient color contrast.',\n      detailedDescription:\n        'Large text must have sufficient contrast with its background to be readable. For large text (18pt or 14pt bold), the contrast ratio should be at least 3:1. This ensures that users with visual impairments can read the content',\n      descriptionUrl: 'https://dequeuniversity.com/rules/axe/3.5/color-contrast'\n    }\n  ],\n  // TODO: Lists\n\n  // TODO: Links\n  [\n    'link-discernible-text',\n    {\n      title: 'Link Text Not Descriptive',\n      description:\n        'Links must have discernible, descriptive text (or aria-label) that conveys purpose without relying on surrounding context.',\n      detailedDescription:\n        'Avoid vague phrases like \"click here\" or bare URLs. Provide concise, meaningful link text that describes the destination. This helps all users, including screen reader users, understand link purpose.',\n      descriptionUrl:\n        'https://www.w3.org/WAI/WCAG21/Understanding/link-purpose-in-context.html'\n    }\n  ]\n\n  // TODO: Other\n]);\n"],"names":[],"sourceRoot":""}